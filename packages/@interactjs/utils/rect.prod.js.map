{"version":3,"file":"rect.prod.js","sources":["rect.ts"],"sourcesContent":["import type {\n  HasGetRect,\n  RectResolvable,\n  Rect,\n  Element,\n  Point,\n  FullRect,\n  EdgeOptions,\n} from '@interactjs/core/types'\n\nimport { closest, getElementRect, parentNode } from './domUtils'\nimport extend from './extend'\nimport is from './is'\n\nexport function getStringOptionResult(value: any, target: HasGetRect, element: Node) {\n  if (value === 'parent') {\n    return parentNode(element)\n  }\n\n  if (value === 'self') {\n    return target.getRect(element as Element)\n  }\n\n  return closest(element, value)\n}\n\nexport function resolveRectLike<T extends any[]>(\n  value: RectResolvable<T>,\n  target?: HasGetRect,\n  element?: Node,\n  functionArgs?: T,\n) {\n  let returnValue: any = value\n  if (is.string(returnValue)) {\n    returnValue = getStringOptionResult(returnValue, target, element)\n  } else if (is.func(returnValue)) {\n    returnValue = returnValue(...functionArgs)\n  }\n\n  if (is.element(returnValue)) {\n    returnValue = getElementRect(returnValue)\n  }\n\n  return returnValue as Rect\n}\n\nexport function toFullRect(rect: Rect): FullRect {\n  const { top, left, bottom, right } = rect\n  const width = rect.width ?? rect.right - rect.left\n  const height = rect.height ?? rect.bottom - rect.top\n\n  return { top, left, bottom, right, width, height }\n}\n\nexport function rectToXY(rect: Rect | Point) {\n  return (\n    rect && {\n      x: 'x' in rect ? rect.x : rect.left,\n      y: 'y' in rect ? rect.y : rect.top,\n    }\n  )\n}\n\nexport function xywhToTlbr<T extends Partial<Rect & Point>>(rect: T) {\n  if (rect && !('left' in rect && 'top' in rect)) {\n    rect = extend({}, rect)\n\n    rect.left = rect.x || 0\n    rect.top = rect.y || 0\n    rect.right = rect.right || rect.left + rect.width\n    rect.bottom = rect.bottom || rect.top + rect.height\n  }\n\n  return rect as Rect & T\n}\n\nexport function tlbrToXywh(rect: Rect & Partial<Point>) {\n  if (rect && !('x' in rect && 'y' in rect)) {\n    rect = extend({}, rect)\n\n    rect.x = rect.left || 0\n    rect.y = rect.top || 0\n    rect.width = rect.width || (rect.right || 0) - rect.x\n    rect.height = rect.height || (rect.bottom || 0) - rect.y\n  }\n\n  return rect as FullRect & Point\n}\n\nexport function addEdges(edges: EdgeOptions, rect: Rect, delta: Point) {\n  if (edges.left) {\n    rect.left += delta.x\n  }\n  if (edges.right) {\n    rect.right += delta.x\n  }\n  if (edges.top) {\n    rect.top += delta.y\n  }\n  if (edges.bottom) {\n    rect.bottom += delta.y\n  }\n\n  rect.width = rect.right - rect.left\n  rect.height = rect.bottom - rect.top\n}\n"],"names":["value","parentNode","element","target","getRect","closest","resolveRectLike","functionArgs","returnValue","getStringOptionResult","is","toFullRect","rect","_rect$width","top","left","bottom","right","width","height","rectToXY","x","xywhToTlbr","extend","y","tlbrToXywh","addEdges","edges","delta"],"mappings":";;qRAcO,iBAAAA,EACIC,WAAKC,GAEd,SAAAF,EAESG,EAAKC,QAAQF,GAEtBG,QAAAH,EAAAF,EAEA,CACF,SAAAM,gBAAAN,EAAAG,EAAAD,EAAAK,GAEgBD,IAAAA,EAAAA,EAed,OATIE,GAAAA,OAAAA,KACUA,sBAAcA,EAAAL,EAAAD,GAC1BM,GAAcC,KAAAA,KACfD,OAA8BD,IAE/BG,GAAAR,QAAAM,OAEeA,eAAcA,IAE7BA,CAEA,CACF,SAAAG,WAAAC,GAEgBD,IAAAA,EAAUA,EAAuB,MAAAE,IACzCC,EAAAC,KAAED,EAAGE,OAAED,EAAIE,MAAED,GAAQC,EAE3B,OAEOH,MAAEA,OAAKC,SAAMC,QAAQC,MAJa,OAAAJ,EAAAD,EAAAM,OAAAL,EAAAD,EAAAK,MAAAL,EAAAG,KAING,gBAHrBN,EAAUO,QAAAN,EAAQD,SAAcG,EAAID,KAIpD,SAAAM,SAAAR,GAEgBQ,OAAAA,GAAQA,CACtBC,EAAA,MACUT,EAAAA,EAAAS,EAAAT,EAAAG,KACNM,EAAG,MAAOT,EAAOA,EAAKS,EAAIT,EAAKG,KAIrC,SAAAO,WAAAV,GAUE,OARcU,GAAAA,SAAqDV,GAAA,QAAAA,KAC/DA,EAAQW,OAAQ,CAAA,EAAAX,SACLA,EAAKA,GAAI,EAEtBA,EAAKG,IAAIH,EAAOY,GAAM,EACtBZ,EAAKE,QAAgBG,OAACL,EAAAG,KAAAH,EAAAM,MACtBN,EAAKK,SAAaA,QAASL,EAASE,IAAOF,UAE7CA,CAEA,CACF,SAAAa,WAAAb,GAUE,OARca,GAAAA,MAAWb,GAA6B,MAAAA,KAClDA,EAAQW,OAAK,CAAA,EAAAX,MACFA,EAACG,MAAQ,EAEtBH,EAAKS,EAAIT,EAAKG,KAAQ,EACtBH,EAAKY,MAAQZ,EAAQM,QAACN,EAAAK,OAAA,GAAAL,EAAAS,EACtBT,EAAKM,OAAYN,WAAeA,aAAmBA,EAAEY,GAEvDZ,CAEA,CACF,SAAAc,SAAAC,EAAAf,EAAAgB,GAEOD,SACDA,EAAAA,MAAYC,EAAAP,GAEhBM,EAAAV,QACIU,EAAAA,OAAaC,EAAAP,GAEjBM,EAAAb,MACIa,EAAAA,KAAWC,EAAAJ,GAEfG,EAAAX,SACIW,EAAAA,QAAcC,EAAAJ,GAElBZ,EAAAM,MAAAN,EAAAK,MAAAL,EAAAG,KAEAH,EAAKM,OAAQN,EAAKK,OAAQL,EAAKG,WAEjCW,SAAAjB,sBAAAW,SAAAd,gBAAAmB,WAAAd,WAAAW"}