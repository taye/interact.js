{
	"version": 3,
	"sources": [
		"InteractableSet.ts"
	],
	"names": [
		"arr",
		"domUtils",
		"extend",
		"is",
		"InteractableSet",
		"constructor",
		"scope",
		"this",
		"list",
		"selectorMap",
		"addListeners",
		"interactable:unset",
		"interactable",
		"target",
		"_context",
		"context",
		"targetMappings",
		"string",
		"id",
		"targetIndex",
		"findIndex",
		"m",
		"splice",
		"new",
		"options",
		"actions",
		"Interactable",
		"document",
		"events",
		"mappingInfo",
		"addDocument",
		"_doc",
		"push",
		"Object",
		"defineProperty",
		"value",
		"configurable",
		"fire",
		"win",
		"_win",
		"get",
		"isSelector",
		"found",
		"find",
		"inContext",
		"forEachMatch",
		"node",
		"callback",
		"ret",
		"element",
		"matchesSelector",
		"undefined"
	],
	"mappings": "UAEYA,MAAS,gCACTC,MAAc,kCACnBC,MAAY,gCACZC,MAAQ,4BAkBR,MAAMC,gBAUXC,YAAaC,GAAuBC,KARpCC,KAAgC,GAQID,KANpCE,YAEI,GAIgCF,KAFpCD,WAEoC,EAClCC,KAAKD,MAAQA,EACbA,EAAMI,aAAa,CACjBC,qBAAsB,EAAGC,aAAAA,MACvB,MAAMC,OAAEA,EAAQC,SAAUC,GAAYH,EAChCI,EAA0Cb,EAAGc,OAAOJ,GACtDN,KAAKE,YAAYI,GAChBA,EAAeN,KAAKD,MAAMY,IAEzBC,EAAcH,EAAeI,UAAUC,GAAKA,EAAEN,UAAYA,GAC5DC,EAAeG,KAEjBH,EAAeG,GAAaJ,QAAU,KACtCC,EAAeG,GAAaP,aAAe,MAE7CI,EAAeM,OAAOH,EAAa,MAKzCI,IAAKV,EAAyBW,GAC5BA,EAAUtB,EAAOsB,GAAW,GAAI,CAC9BC,QAASlB,KAAKD,MAAMmB,UAEtB,MAAMb,EAAe,IAAIL,KAAKD,MAAMoB,aAAab,EAAQW,EAASjB,KAAKD,MAAMqB,SAAUpB,KAAKD,MAAMsB,QAC5FC,EAAc,CAAEd,QAASH,EAAaE,SAAUF,aAAAA,GA0BtD,OAxBAL,KAAKD,MAAMwB,YAAYlB,EAAamB,MACpCxB,KAAKC,KAAKwB,KAAKpB,GAEXT,EAAGc,OAAOJ,IACPN,KAAKE,YAAYI,KAAWN,KAAKE,YAAYI,GAAU,IAC5DN,KAAKE,YAAYI,GAAQmB,KAAKH,KAEvBjB,EAAaC,OAAeN,KAAKD,MAAMY,KAC5Ce,OAAOC,eAAerB,EAAQN,KAAKD,MAAMY,GAAI,CAC3CiB,MAAO,GACPC,cAAc,IAIjBvB,EAAeN,KAAKD,MAAMY,IAAIc,KAAKH,IAGtCtB,KAAKD,MAAM+B,KAAK,mBAAoB,CAClCxB,OAAAA,EACAW,QAAAA,EACAZ,aAAAA,EACA0B,IAAK/B,KAAKD,MAAMiC,OAGX3B,EAGT4B,IAAK3B,EAAyBW,GAC5B,MAAMT,EAAWS,GAAWA,EAAQT,SAAYR,KAAKD,MAAMqB,SACrDc,EAAatC,EAAGc,OAAOJ,GACvBG,EAA0CyB,EAC5ClC,KAAKE,YAAYI,GAChBA,EAAeN,KAAKD,MAAMY,IAE/B,IAAKF,EAAkB,OAAO,KAE9B,MAAM0B,EAAQ1C,EAAI2C,KAChB3B,EACAK,GAAKA,EAAEN,UAAYA,IAChB0B,GAAcpB,EAAET,aAAagC,UAAU/B,KAE5C,OAAO6B,GAASA,EAAM9B,aAGxBiC,aAAiBC,EAAYC,GAC3B,IAAK,MAAMnC,KAAgBL,KAAKC,KAAM,CACpC,IAAIwC,EAYJ,IAVK7C,EAAGc,OAAOL,EAAaC,QAEvBV,EAAG8C,QAAQH,IAAS7C,EAASiD,gBAAgBJ,EAAMlC,EAAaC,QAEjEiC,IAASlC,EAAaC,SAEvBD,EAAagC,UAAUE,KACxBE,EAAMD,EAASnC,SAGLuC,IAARH,EACF,OAAOA",
	"sourcesContent": [
		"import { Interactable } from '@interactjs/core/Interactable'\nimport * as Interact from '@interactjs/types/index'\nimport * as arr from '@interactjs/utils/arr'\nimport * as domUtils from '@interactjs/utils/domUtils'\nimport extend from '@interactjs/utils/extend'\nimport is from '@interactjs/utils/is'\n\ndeclare module '@interactjs/core/scope' {\n  interface SignalArgs {\n    'interactable:new': {\n      interactable: Interact.Interactable\n      target: Interact.Target\n      options: Interact.OptionsArg\n      win: Window\n    }\n  }\n}\n\ninterface InteractableScopeProp {\n  context: Document | Interact.Element\n  interactable: Interact.Interactable\n}\n\nexport class InteractableSet {\n  // all set interactables\n  list: Interact.Interactable[] = []\n\n  selectorMap: {\n    [selector: string]: InteractableScopeProp[]\n  } = {}\n\n  scope: Interact.Scope\n\n  constructor (scope: Interact.Scope) {\n    this.scope = scope\n    scope.addListeners({\n      'interactable:unset': ({ interactable }) => {\n        const { target, _context: context } = interactable\n        const targetMappings: InteractableScopeProp[] = is.string(target)\n          ? this.selectorMap[target]\n          : (target as any)[this.scope.id]\n\n        const targetIndex = targetMappings.findIndex(m => m.context === context)\n        if (targetMappings[targetIndex]) {\n        // Destroying mappingInfo's context and interactable\n          targetMappings[targetIndex].context = null\n          targetMappings[targetIndex].interactable = null\n        }\n        targetMappings.splice(targetIndex, 1)\n      },\n    })\n  }\n\n  new (target: Interact.Target, options?: any): Interactable {\n    options = extend(options || {}, {\n      actions: this.scope.actions,\n    })\n    const interactable = new this.scope.Interactable(target, options, this.scope.document, this.scope.events)\n    const mappingInfo = { context: interactable._context, interactable }\n\n    this.scope.addDocument(interactable._doc)\n    this.list.push(interactable)\n\n    if (is.string(target)) {\n      if (!this.selectorMap[target]) { this.selectorMap[target] = [] }\n      this.selectorMap[target].push(mappingInfo)\n    } else {\n      if (!((interactable.target as any)[this.scope.id])) {\n        Object.defineProperty(target, this.scope.id, {\n          value: [],\n          configurable: true,\n        })\n      }\n\n      (target as any)[this.scope.id].push(mappingInfo)\n    }\n\n    this.scope.fire('interactable:new', {\n      target,\n      options,\n      interactable,\n      win: this.scope._win,\n    })\n\n    return interactable\n  }\n\n  get (target: Interact.Target, options?: Interact.Options) {\n    const context = (options && options.context) || this.scope.document\n    const isSelector = is.string(target)\n    const targetMappings: InteractableScopeProp[] = isSelector\n      ? this.selectorMap[target as string]\n      : (target as any)[this.scope.id]\n\n    if (!targetMappings) { return null }\n\n    const found = arr.find(\n      targetMappings,\n      m => m.context === context &&\n        (isSelector || m.interactable.inContext(target as any)))\n\n    return found && found.interactable\n  }\n\n  forEachMatch<T> (node: Node, callback: (interactable: Interact.Interactable) => T) {\n    for (const interactable of this.list) {\n      let ret: void | T\n\n      if ((is.string(interactable.target)\n      // target is a selector and the element matches\n        ? (is.element(node) && domUtils.matchesSelector(node, interactable.target))\n        // target is the element\n        : node === interactable.target) &&\n        // the element is in context\n        (interactable.inContext(node))) {\n        ret = callback(interactable)\n      }\n\n      if (ret !== undefined) {\n        return ret\n      }\n    }\n  }\n}\n"
	]
}