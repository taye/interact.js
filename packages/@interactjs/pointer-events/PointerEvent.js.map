{"version":3,"file":"PointerEvent.js","sources":["PointerEvent.ts"],"sourcesContent":["import { BaseEvent } from '@interactjs/core/BaseEvent'\nimport type Interaction from '@interactjs/core/Interaction'\nimport type { PointerEventType, PointerType, Point } from '@interactjs/core/types'\nimport * as pointerUtils from '@interactjs/utils/pointerUtils'\n\nexport class PointerEvent<T extends string = any> extends BaseEvent<never> {\n  declare type: T\n  declare originalEvent: PointerEventType\n  declare pointerId: number\n  declare pointerType: string\n  declare double: boolean\n  declare pageX: number\n  declare pageY: number\n  declare clientX: number\n  declare clientY: number\n  declare dt: number\n  declare eventable: any;\n  [key: string]: any\n\n  constructor(\n    type: T,\n    pointer: PointerType | PointerEvent<any>,\n    event: PointerEventType,\n    eventTarget: Node,\n    interaction: Interaction<never>,\n    timeStamp: number,\n  ) {\n    super(interaction)\n    pointerUtils.pointerExtend(this, event)\n\n    if (event !== pointer) {\n      pointerUtils.pointerExtend(this, pointer)\n    }\n\n    this.timeStamp = timeStamp\n    this.originalEvent = event\n    this.type = type\n    this.pointerId = pointerUtils.getPointerId(pointer)\n    this.pointerType = pointerUtils.getPointerType(pointer)\n    this.target = eventTarget\n    this.currentTarget = null\n\n    if (type === 'tap') {\n      const pointerIndex = interaction.getPointerIndex(pointer)\n      this.dt = this.timeStamp - interaction.pointers[pointerIndex].downTime\n\n      const interval = this.timeStamp - interaction.tapTime\n\n      this.double =\n        !!interaction.prevTap &&\n        interaction.prevTap.type !== 'doubletap' &&\n        interaction.prevTap.target === this.target &&\n        interval < 500\n    } else if (type === 'doubletap') {\n      this.dt = (pointer as PointerEvent<'tap'>).timeStamp - interaction.tapTime\n      this.double = true\n    }\n  }\n\n  _subtractOrigin({ x: originX, y: originY }: Point) {\n    this.pageX -= originX\n    this.pageY -= originY\n    this.clientX -= originX\n    this.clientY -= originY\n\n    return this\n  }\n\n  _addOrigin({ x: originX, y: originY }: Point) {\n    this.pageX += originX\n    this.pageY += originY\n    this.clientX += originX\n    this.clientY += originY\n\n    return this\n  }\n\n  /**\n   * Prevent the default behaviour of the original Event\n   */\n  preventDefault() {\n    this.originalEvent.preventDefault()\n  }\n}\n"],"names":["PointerEvent","BaseEvent","constructor","type","pointer","event","eventTarget","interaction","timeStamp","pointerUtils","pointerExtend","originalEvent","pointerId","getPointerId","pointerType","getPointerType","target","currentTarget","pointerIndex","getPointerIndex","dt","pointers","downTime","interval","tapTime","double","prevTap","_subtractOrigin","_ref","x","originX","y","originY","pageX","pageY","clientX","clientY","_addOrigin","_ref2","preventDefault"],"mappings":";;;;;;;;;;;AAKO,MAAMA,YAAY,SAAiCC,SAAS,CAAQ;AAczEC,EAAAA,WAAWA,CACTC,IAAO,EACPC,OAAwC,EACxCC,KAAuB,EACvBC,WAAiB,EACjBC,WAA+B,EAC/BC,SAAiB,EACjB;IACA,KAAK,CAACD,WAAW,CAAC,CAAA;AAClBE,IAAAA,YAAY,CAACC,aAAa,CAAC,IAAI,EAAEL,KAAK,CAAC,CAAA;IAEvC,IAAIA,KAAK,KAAKD,OAAO,EAAE;AACrBK,MAAAA,YAAY,CAACC,aAAa,CAAC,IAAI,EAAEN,OAAO,CAAC,CAAA;AAC3C,KAAA;IAEA,IAAI,CAACI,SAAS,GAAGA,SAAS,CAAA;IAC1B,IAAI,CAACG,aAAa,GAAGN,KAAK,CAAA;IAC1B,IAAI,CAACF,IAAI,GAAGA,IAAI,CAAA;IAChB,IAAI,CAACS,SAAS,GAAGH,YAAY,CAACI,YAAY,CAACT,OAAO,CAAC,CAAA;IACnD,IAAI,CAACU,WAAW,GAAGL,YAAY,CAACM,cAAc,CAACX,OAAO,CAAC,CAAA;IACvD,IAAI,CAACY,MAAM,GAAGV,WAAW,CAAA;IACzB,IAAI,CAACW,aAAa,GAAG,IAAI,CAAA;IAEzB,IAAId,IAAI,KAAK,KAAK,EAAE;AAClB,MAAA,MAAMe,YAAY,GAAGX,WAAW,CAACY,eAAe,CAACf,OAAO,CAAC,CAAA;AACzD,MAAA,IAAI,CAACgB,EAAE,GAAG,IAAI,CAACZ,SAAS,GAAGD,WAAW,CAACc,QAAQ,CAACH,YAAY,CAAC,CAACI,QAAQ,CAAA;MAEtE,MAAMC,QAAQ,GAAG,IAAI,CAACf,SAAS,GAAGD,WAAW,CAACiB,OAAO,CAAA;AAErD,MAAA,IAAI,CAACC,MAAM,GACT,CAAC,CAAClB,WAAW,CAACmB,OAAO,IACrBnB,WAAW,CAACmB,OAAO,CAACvB,IAAI,KAAK,WAAW,IACxCI,WAAW,CAACmB,OAAO,CAACV,MAAM,KAAK,IAAI,CAACA,MAAM,IAC1CO,QAAQ,GAAG,GAAG,CAAA;AAClB,KAAC,MAAM,IAAIpB,IAAI,KAAK,WAAW,EAAE;MAC/B,IAAI,CAACiB,EAAE,GAAIhB,OAAO,CAAyBI,SAAS,GAAGD,WAAW,CAACiB,OAAO,CAAA;MAC1E,IAAI,CAACC,MAAM,GAAG,IAAI,CAAA;AACpB,KAAA;AACF,GAAA;EAEAE,eAAeA,CAAAC,IAAA,EAAoC;IAAA,IAAnC;AAAEC,MAAAA,CAAC,EAAEC,OAAO;AAAEC,MAAAA,CAAC,EAAEC,OAAAA;AAAe,KAAC,GAAAJ,IAAA,CAAA;IAC/C,IAAI,CAACK,KAAK,IAAIH,OAAO,CAAA;IACrB,IAAI,CAACI,KAAK,IAAIF,OAAO,CAAA;IACrB,IAAI,CAACG,OAAO,IAAIL,OAAO,CAAA;IACvB,IAAI,CAACM,OAAO,IAAIJ,OAAO,CAAA;AAEvB,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;EAEAK,UAAUA,CAAAC,KAAA,EAAoC;IAAA,IAAnC;AAAET,MAAAA,CAAC,EAAEC,OAAO;AAAEC,MAAAA,CAAC,EAAEC,OAAAA;AAAe,KAAC,GAAAM,KAAA,CAAA;IAC1C,IAAI,CAACL,KAAK,IAAIH,OAAO,CAAA;IACrB,IAAI,CAACI,KAAK,IAAIF,OAAO,CAAA;IACrB,IAAI,CAACG,OAAO,IAAIL,OAAO,CAAA;IACvB,IAAI,CAACM,OAAO,IAAIJ,OAAO,CAAA;AAEvB,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;;AAEA;AACF;AACA;AACEO,EAAAA,cAAcA,GAAG;AACf,IAAA,IAAI,CAAC5B,aAAa,CAAC4B,cAAc,EAAE,CAAA;AACrC,GAAA;AACF;;;;"}