/* interact.js v1.2.8 | https://raw.github.com/taye/interact.js/master/LICENSE */
(function(E){function la(){}function w(a){if(!a||"object"!==typeof a)return!1;var b=U(a)||r;return/object|function/.test(typeof b.Element)?a instanceof b.Element:1===a.nodeType&&"string"===typeof a.nodeName}function ya(a){return a===r||!(!a||!a.Window)&&a instanceof a.Window}function ca(a){return y(a)&&!0&&A(a.splice)}function y(a){return!!a&&"object"===typeof a}function A(a){return"function"===typeof a}function I(a){return"number"===typeof a}function G(a){return"boolean"===typeof a}function L(a){return"string"===typeof a}function da(a){if(!L(a))return!1;O.querySelector(a);return!0}function z(a,b){for(var c in b)a[c]=b[c];return a}function pa(a,b){for(var c in b){var d=!1,e;for(e in za)if(0===c.indexOf(e)&&za[e].test(c)){d=!0;break}d||(a[c]=b[c])}return a}function qa(a,b){a.page=a.page||{};a.page.x=b.page.x;a.page.y=b.page.y;a.client=a.client||{};a.client.x=b.client.x;a.client.y=b.client.y;a.timeStamp=b.timeStamp}function Qa(a,b,c){a.page.x=c.page.x-b.page.x;a.page.y=c.page.y-b.page.y;a.client.x=c.client.x-b.client.x;a.client.y=c.client.y-b.client.y;a.timeStamp=(new Date).getTime()-b.timeStamp;b=Math.max(a.timeStamp/1E3,.001);a.page.speed=ea(a.page.x,a.page.y)/b;a.page.vx=a.page.x/b;a.page.vy=a.page.y/b;a.client.speed=ea(a.client.x,a.page.y)/b;a.client.vx=a.client.x/b;a.client.vy=a.client.y/b}function Ra(a){return a instanceof r.Event||fa&&r.Touch&&a instanceof r.Touch}function ra(a,b,c){c=c||{};a=a||"page";c.x=b[a+"X"];c.y=b[a+"Y"];return c}function Aa(a,b){b=b||{};Sa&&Ra(a)?(ra("screen",a,b),b.x+=r.scrollX,b.y+=r.scrollY):ra("page",a,b);return b}function Ta(a,b){b=b||{};Sa&&Ra(a)?ra("screen",a,b):ra("client",a,b);return b}function M(a){return I(a.pointerId)?a.pointerId:a.identifier}function Ba(a){return a instanceof lb?a.correspondingUseElement:a}function U(a){if(ya(a))return a;a=a.ownerDocument||a;return a.defaultView||a.parentWindow||r}function Ca(a){return(a=a instanceof Ua?a.getBoundingClientRect():a.getClientRects()[0])&&{left:a.left,right:a.right,top:a.top,bottom:a.bottom,width:a.width||a.right-a.left,height:a.height||a.bottom-a.top}}function sa(a){var b,c=Ca(a);!mb&&c&&(b=(b=U(a))||r,a=b.scrollX||b.document.documentElement.scrollLeft,b=b.scrollY||b.document.documentElement.scrollTop,c.left+=a,c.right+=a,c.top+=b,c.bottom+=b);return c}function Da(a){var b=[];ca(a)?(b[0]=a[0],b[1]=a[1]):"touchend"===a.type?1===a.touches.length?(b[0]=a.touches[0],b[1]=a.changedTouches[0]):0===a.touches.length&&(b[0]=a.changedTouches[0],b[1]=a.changedTouches[1]):(b[0]=a.touches[0],b[1]=a.touches[1]);return b}function Va(a){for(var b={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},c,d=0;d<a.length;d++)for(c in b)b[c]+=a[d][c];for(c in b)b[c]/=a.length;return b}function Ea(a){if(a.length||a.touches&&1<a.touches.length){a=Da(a);var b=Math.min(a[0].pageX,a[1].pageX),c=Math.min(a[0].pageY,a[1].pageY);return{x:b,y:c,left:b,top:c,width:Math.max(a[0].pageX,a[1].pageX)-b,height:Math.max(a[0].pageY,a[1].pageY)-c}}}function Fa(a,b){b=b||D.deltaSource;var c=b+"X",d=b+"Y",e=Da(a);return ea(e[0][c]-e[1][c],e[0][d]-e[1][d])}function Ga(a,b,c){c=c||D.deltaSource;var d=c+"X";c+="Y";a=Da(a);d=180*Math.atan((a[0][c]-a[1][c])/(a[0][d]-a[1][d]))/Math.PI;I(b)&&(b=(d-b)%360,315<b?d-=360+d/360|0:135<b?d-=180+d/360|0:-315>b?d+=360+d/360|0:-135>b&&(d+=180+d/360|0));return d}function ma(a,b){var c=a?a.options.origin:D.origin;"parent"===c?c=J(b):"self"===c?c=a.getRect(b):da(c)&&(c=Ha(b,c)||{x:0,y:0});A(c)&&(c=c(a&&b));w(c)&&(c=sa(c));c.x="x"in c?c.x:c.left;c.y="y"in c?c.y:c.top;return c}function Wa(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d}function Y(a,b){for(;b;){if(b===a)return!0;b=b.parentNode}return!1}function Ha(a,b){for(var c=J(a);w(c);){if(P(c,b))return c;c=J(c)}return null}function J(a){if((a=a.parentNode)&&a instanceof Xa)for(;(a=a.host)&&a&&a instanceof Xa;);return a}function ta(a,b){return a._context===b.ownerDocument||Y(a._context,b)}function Z(a,b,c){return(a=a.options.ignoreFrom)&&w(c)?L(a)?Ia(c,a,b):w(a)?Y(a,c):!1:!1}function aa(a,b,c){return(a=a.options.allowFrom)?w(c)?L(a)?Ia(c,a,b):w(a)?Y(a,c):!1:!1:!0}function Ya(a,b){if(!b)return!1;var c=b.options.drag.axis;return"xy"===a||"xy"===c||c===a}function Ja(a,b){var c=a.options;/^resize/.test(b)&&(b="resize");return c[b].snap&&c[b].snap.enabled}function Ka(a,b){var c=a.options;/^resize/.test(b)&&(b="resize");return c[b].restrict&&c[b].restrict.enabled}function ga(a,b,c){for(var d=a.options,e=d[c.name].max,d=d[c.name].maxPerElement,f=0,h=0,g=0,k=0,q=v.length;k<q;k++){var l=v[k],t=l.prepared.name;if(l.interacting()&&(f++,f>=ua||l.target===a&&(h+=t===c.name|0,h>=e||l.element===b&&(g++,t!==c.name||g>=d))))return!1}return 0<ua}function va(){this.prevDropElement=this.prevDropTarget=this.dropElement=this.dropTarget=this.element=this.target=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(A(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var a=this;this.boundInertiaFrame=function(){return a.inertiaFrame()};this.boundSmoothEndFrame=function(){return a.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this.prevEvent=this._curEventTarget=this._eventTarget=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1};this.restrictStatus.snap=this.snapStatus;this.resizing=this.dragging=this.gesturing=this.pointerWasMoved=this.pointerIsDown=!1;this.resizeAxes="xy";this.mouse=!1;v.push(this)}function Za(a,b,c){var d=v.length,e=/mouse/i.test(a.pointerType||b)||4===a.pointerType,f,h=M(a);if(/down|start/i.test(b))for(a=0;a<d;a++){f=v[a];var g=c;if(f.inertiaStatus.active&&f.target.options[f.prepared.name].inertia.allowResume&&f.mouse===e)for(;g;){if(g===f.element)return f;g=J(g)}}if(e||!fa&&!Q){for(a=0;a<d;a++)if(v[a].mouse&&!v[a].inertiaStatus.active)return v[a];for(a=0;a<d;a++)if(v[a].mouse&&(!/down/.test(b)||!v[a].inertiaStatus.active))return f;f=new va;f.mouse=!0;return f}for(a=0;a<d;a++)if(-1!==x(v[a].pointerIds,h))return v[a];if(/up|end|out/i.test(b))return null;for(a=0;a<d;a++)if(f=v[a],!(f.prepared.name&&!f.target.options.gesture.enabled||f.interacting()||!e&&f.mouse))return f;return new va}function $a(a){return function(b){var c,d=Ba(b.path?b.path[0]:b.target),e=Ba(b.currentTarget),f;if(fa&&/touch/.test(b.type))for(ab=(new Date).getTime(),f=0;f<b.changedTouches.length;f++){var h=b.changedTouches[f];if(c=Za(h,b.type,d))c._updateEventTargets(d,e),c[a](h,b,d,e)}else{if(!Q&&/mouse/.test(b.type)){for(f=0;f<v.length;f++)if(!v[f].mouse&&v[f].pointerIsDown)return;if(500>(new Date).getTime()-ab)return}if(c=Za(b,b.type,d))c._updateEventTargets(d,e),c[a](b,b,d,e)}}}function F(a,b,c,d,e,f){var h,g,k=a.target,q=a.snapStatus,l=a.restrictStatus,t=a.pointers,u=(k&&k.options||D).deltaSource,m=u+"X",n=u+"Y",p=k?k.options:D,V=ma(k,e),ha="start"===d,r="end"===d;h=ha?a.startCoords:a.curCoords;e=e||a.element;g=z({},h.page);h=z({},h.client);g.x-=V.x;g.y-=V.y;h.x-=V.x;h.y-=V.y;var v=p[c].snap&&p[c].snap.relativePoints;!Ja(k,c)||ha&&v&&v.length||(this.snap={range:q.range,locked:q.locked,x:q.snappedX,y:q.snappedY,realX:q.realX,realY:q.realY,dx:q.dx,dy:q.dy},q.locked&&(g.x+=q.dx,g.y+=q.dy,h.x+=q.dx,h.y+=q.dy));!Ka(k,c)||ha&&p[c].restrict.elementRect||!l.restricted||(g.x+=l.dx,g.y+=l.dy,h.x+=l.dx,h.y+=l.dy,this.restrict={dx:l.dx,dy:l.dy});this.pageX=g.x;this.pageY=g.y;this.clientX=h.x;this.clientY=h.y;this.x0=a.startCoords.page.x-V.x;this.y0=a.startCoords.page.y-V.y;this.clientX0=a.startCoords.client.x-V.x;this.clientY0=a.startCoords.client.y-V.y;this.ctrlKey=b.ctrlKey;this.altKey=b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.button=b.button;this.buttons=b.buttons;this.target=e;this.t0=a.downTimes[0];this.type=c+(d||"");this.interaction=a;this.interactable=k;e=a.inertiaStatus;e.active&&(this.detail="inertia");f&&(this.relatedTarget=f);r?"client"===u?(this.dx=h.x-a.startCoords.client.x,this.dy=h.y-a.startCoords.client.y):(this.dx=g.x-a.startCoords.page.x,this.dy=g.y-a.startCoords.page.y):ha?this.dy=this.dx=0:"inertiastart"===d?(this.dx=a.prevEvent.dx,this.dy=a.prevEvent.dy):"client"===u?(this.dx=h.x-a.prevEvent.clientX,this.dy=h.y-a.prevEvent.clientY):(this.dx=g.x-a.prevEvent.pageX,this.dy=g.y-a.prevEvent.pageY);a.prevEvent&&"inertia"===a.prevEvent.detail&&!e.active&&p[c].inertia&&p[c].inertia.zeroResumeDelta&&(e.resumeDx+=this.dx,e.resumeDy+=this.dy,this.dx=this.dy=0);"resize"===c&&a.resizeAxes?p.resize.square?("y"===a.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=a.resizeAxes,"x"===a.resizeAxes?this.dy=0:"y"===a.resizeAxes&&(this.dx=0)):"gesture"===c&&(this.touches=[t[0],t[1]],ha?(this.distance=Fa(t,u),this.box=Ea(t),this.scale=1,this.ds=0,this.angle=Ga(t,void 0,u),this.da=0):r||b instanceof F?(this.distance=a.prevEvent.distance,this.box=a.prevEvent.box,this.scale=a.prevEvent.scale,this.ds=this.scale-1,this.angle=a.prevEvent.angle,this.da=this.angle-a.gesture.startAngle):(this.distance=Fa(t,u),this.box=Ea(t),this.scale=this.distance/a.gesture.startDistance,this.angle=Ga(t,a.gesture.prevAngle,u),this.ds=this.scale-a.gesture.prevScale,this.da=this.angle-a.gesture.prevAngle));ha?(this.timeStamp=a.downTimes[0],this.velocityY=this.velocityX=this.speed=this.duration=this.dt=0):"inertiastart"===d?(this.timeStamp=a.prevEvent.timeStamp,this.dt=a.prevEvent.dt,this.duration=a.prevEvent.duration,this.speed=a.prevEvent.speed,this.velocityX=a.prevEvent.velocityX,this.velocityY=a.prevEvent.velocityY):(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-a.prevEvent.timeStamp,this.duration=this.timeStamp-a.downTimes[0],b instanceof F?(b=this[m]-a.prevEvent[m],n=this[n]-a.prevEvent[n],c=this.dt/1E3,this.speed=ea(b,n)/c,this.velocityX=b/c,this.velocityY=n/c):(this.speed=a.pointerDelta[u].speed,this.velocityX=a.pointerDelta[u].vx,this.velocityY=a.pointerDelta[u].vy));(r||"inertiastart"===d)&&600<a.prevEvent.speed&&150>this.timeStamp-a.prevEvent.timeStamp&&(d=180*Math.atan2(a.prevEvent.velocityY,a.prevEvent.velocityX)/Math.PI,0>d&&(d+=360),r=112.5<=d&&247.5>d,n=202.5<=d&&337.5>d,this.swipe={up:n,down:!n&&22.5<=d&&157.5>d,left:r,right:!r&&(292.5<=d||67.5>d),angle:d,speed:a.prevEvent.speed,velocity:{x:a.prevEvent.velocityX,y:a.prevEvent.velocityY}})}function cb(){this.originalEvent.preventDefault()}function db(a){var b="";"drag"===a.name&&(b=wa.drag);if("resize"===a.name)if(a.axis)b=wa[a.name+a.axis];else if(a.edges){for(var b="resize",c="top bottom left right topleft bottomleft topright bottomright".split(" "),d=0;d<c.length;d++)a.edges[c[d]]&&(b+=c[d]);b=wa[b]}return b}function nb(a,b,c,d,e,f,h){if(!b)return!1;if(!0===b){var g=I(f.width)?f.width:f.right-f.left,k=I(f.height)?f.height:f.bottom-f.top,q=c.x<(0<=g?f.left:f.right)+h,l=c.y<(0<=k?f.top:f.bottom)+h,t=c.x>(0<=g?f.right:f.left)-h;c=c.y>(0<=k?f.bottom:f.top)-h;0>g&&("left"===a?a="right":"right"===a&&(a="left"));0>k&&("top"===a?a="bottom":"bottom"===a&&(a="top"));if("left"===a)return q;if("top"===a)return l;if("right"===a)return t;if("bottom"===a)return c;if("topleft"===a)return q&&l;if("topright"===a)return l&&t;if("bottomright"===a)return t&&c;if("bottomleft"===a)return q&&c}return w(d)?w(b)?b===d:Ia(d,b,e):!1}function eb(a,b,c){var d=this.getRect(c),e=!1,f=null,h,g=z({},b.curCoords.page);a=this.options;if(!d)return null;if(R.resize&&a.resize.enabled)if(e=a.resize,h={left:!1,right:!1,top:!1,bottom:!1,topleft:!1,topright:!1,bottomleft:!1,bottomright:!1},y(e.edges)){for(var k in h)h[k]=nb(k,e.edges[k],g,b._eventTarget,c,d,e.margin||na);h.left=h.left&&!h.right;h.top=h.top&&!h.bottom;e=h.left||h.right||h.top||h.bottom||h.topleft||h.topright||h.bottomleft||h.bottomright}else c="y"!==a.resize.axis&&g.x>d.right-na,d="x"!==a.resize.axis&&g.y>d.bottom-na,e=c||d,f=(c?"x":"")+(d?"y":"");a=e?"resize":R.drag&&a.drag.enabled?"drag":null;R.gesture&&2<=b.pointerIds.length&&!b.dragging&&!b.resizing&&(a="gesture");return a?{name:a,axis:f,edges:h}:null}function W(a,b){if(!y(a))return null;var c=a.name,d=b.options;return("resize"===c&&d.resize.enabled||"drag"===c&&d.drag.enabled||"gesture"===c&&d.gesture.enabled)&&R[c]?a:null}function oa(a,b){var c={},d=N[a.type],e=Ba(a.path?a.path[0]:a.target),f=e;b=b?!0:!1;for(var h in a)c[h]=a[h];c.originalEvent=a;for(c.preventDefault=cb;w(f);){for(h=0;h<d.selectors.length;h++){var g=d.contexts[h];if(P(f,d.selectors[h])&&Y(g,e)&&Y(g,f)){g=d.listeners[h];c.currentTarget=f;for(var k=0;k<g.length;k++)if(g[k][1]===b)g[k][0](c)}}f=J(f)}}function xa(a){return oa.call(this,a,!0)}function m(a,b){return B.get(a,b)||new C(a,b)}function C(a,b){this._element=a;this._iEvents=this._iEvents||{};var c;if(da(a)){this.selector=a;var d=b&&b.context;c=d?U(d):r;d&&(c.Node?d instanceof c.Node:w(d)||d===c.document)&&(this._context=d)}else c=U(a),w(a,c)&&(Q?(l.add(this._element,H.down,n.pointerDown),l.add(this._element,H.move,n.pointerHover)):(l.add(this._element,"mousedown",n.pointerDown),l.add(this._element,"mousemove",n.pointerHover),l.add(this._element,"touchstart",n.pointerDown),l.add(this._element,"touchmove",n.pointerHover)));this._doc=c.document;-1===x(ia,this._doc)&&fb(this._doc);B.push(this);this.set(b)}function K(a,b){var c=!1;return function(){c||(r.console.warn(b),c=!0);return a.apply(this,arguments)}}function gb(a){for(var b=0;b<v.length;b++)v[b].pointerEnd(a,a)}function fb(a){if(-1===x(ia,a)){var b=a.defaultView||a.parentWindow,c;for(c in N)l.add(a,c,oa),l.add(a,c,xa,!0);Q?(H=hb===b.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},l.add(a,H.down,n.selectorDown),l.add(a,H.move,n.pointerMove),l.add(a,H.over,n.pointerOver),l.add(a,H.out,n.pointerOut),l.add(a,H.up,n.pointerUp),l.add(a,H.cancel,n.pointerCancel),l.add(a,H.move,n.autoScrollMove)):(l.add(a,"mousedown",n.selectorDown),l.add(a,"mousemove",n.pointerMove),l.add(a,"mouseup",n.pointerUp),l.add(a,"mouseover",n.pointerOver),l.add(a,"mouseout",n.pointerOut),l.add(a,"touchstart",n.selectorDown),l.add(a,"touchmove",n.pointerMove),l.add(a,"touchend",n.pointerUp),l.add(a,"touchcancel",n.pointerCancel),l.add(a,"mousemove",n.autoScrollMove),l.add(a,"touchmove",n.autoScrollMove));l.add(b,"blur",gb);try{if(b.frameElement){var d=b.frameElement.ownerDocument,e=d.defaultView;l.add(d,"mouseup",n.pointerEnd);l.add(d,"touchend",n.pointerEnd);l.add(d,"touchcancel",n.pointerEnd);l.add(d,"pointerup",n.pointerEnd);l.add(d,"MSPointerUp",n.pointerEnd);l.add(e,"blur",gb)}}catch(f){m.windowParentError=f}l.add(a,"dragstart",function(a){for(var b=0;b<v.length;b++){var c=v[b];if(c.element&&(c.element===a.target||Y(c.element,a.target))){c.checkAndPreventDefault(a,c.target,c.element);break}}});l.useAttachEvent&&(l.add(a,"selectstart",function(a){var b=v[0];b.currentAction()&&b.checkAndPreventDefault(a)}),l.add(a,"dblclick",$a("ie8Dblclick")));ia.push(a)}}function x(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function P(a,b,c){if(ja)return ja(a,b,c);r!==E&&(b=b.replace(/\/deep\//g," "));return a[La](b)}function Ia(a,b,c){for(;w(a);){if(P(a,b))return!0;a=J(a);if(a===c)return P(a,b)}return!1}if(E){var r=function(){var a=E.document.createTextNode("");return a.ownerDocument!==E.document&&"function"===typeof E.wrap&&E.wrap(a)===a?E.wrap(E):E}(),O=r.document,Xa=r.DocumentFragment||la,Ua=r.SVGElement||la,ob=r.SVGSVGElement||la,lb=r.SVGElementInstance||la,pb=r.HTMLElement||r.Element,hb=r.PointerEvent||r.MSPointerEvent,H,ea=Math.hypot||function(a,b){return Math.sqrt(a*a+b*b)},ka={},ia=[],B=[],v=[],Ma=!1,N={},D={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:O,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:Infinity,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},p={interaction:null,i:null,x:0,y:0,scroll:function(){var a=p.interaction.target.options[p.interaction.prepared.name].autoScroll,b=a.container||U(p.interaction.element),c=(new Date).getTime(),d=(c-p.prevTimeX)/1E3,e=(c-p.prevTimeY)/1E3,f;a.velocity?(f=a.velocity.x,a=a.velocity.y):f=a=a.speed;d*=f;e*=a;if(1<=d||1<=e)ya(b)?b.scrollBy(p.x*d,p.y*e):b&&(b.scrollLeft+=p.x*d,b.scrollTop+=p.y*e),1<=d&&(p.prevTimeX=c),1<=e&&(p.prevTimeY=c);p.isScrolling&&(X(p.i),p.i=S(p.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(a){p.isScrolling=!0;X(p.i);p.interaction=a;p.prevTimeX=(new Date).getTime();p.prevTimeY=(new Date).getTime();p.i=S(p.scroll)},stop:function(){p.isScrolling=!1;X(p.i)}},fa="ontouchstart"in r||r.DocumentTouch&&O instanceof r.DocumentTouch,Q=hb&&!/Chrome/.test(navigator.userAgent),na=fa||Q?20:10,Na=1,ab=0,ua=Infinity,wa=O.all&&!r.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},R={drag:!0,resize:!0,gesture:!0},ib="onmousewheel"in O?"mousewheel":"wheel",ba="dragstart dragmove draginertiastart dragend dragenter dragleave dropactivate dropdeactivate dropmove drop resizestart resizemove resizeinertiastart resizeend gesturestart gesturemove gestureinertiastart gestureend down move up cancel tap doubletap hold".split(" "),T={},Sa="Opera"==navigator.appName&&fa&&navigator.userAgent.match("Presto"),mb=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),La="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",ja,S=E.requestAnimationFrame,X=E.cancelAnimationFrame,l=function(){function a(b,c,d,f){var t,m=x(k,b),u=q[m],n,p,r=d;if(u&&u.events)if(e&&(n=l[m],p=x(n.supplied,d),r=n.wrapped[p]),"all"===c)for(c in u.events)u.events.hasOwnProperty(c)&&a(b,c,"all");else{if(u.events[c]){var bb=u.events[c].length;if("all"===d){for(t=0;t<bb;t++)a(b,c,u.events[c][t],!!f);return}for(t=0;t<bb;t++)if(u.events[c][t]===d){b[h](g+c,r,f||!1);u.events[c].splice(t,1);e&&n&&(n.useCount[p]--,0===n.useCount[p]&&(n.supplied.splice(p,1),n.wrapped.splice(p,1),n.useCount.splice(p,1)));break}u.events[c]&&0===u.events[c].length&&(u.events[c]=null,u.typeCount--)}u.typeCount||(q.splice(m,1),k.splice(m,1),l.splice(m,1))}}function b(){this.returnValue=!1}function c(){this.cancelBubble=!0}function d(){this.immediatePropagationStopped=this.cancelBubble=!0}var e="attachEvent"in r&&!("addEventListener"in r),f=e?"attachEvent":"addEventListener",h=e?"detachEvent":"removeEventListener",g=e?"on":"",k=[],q=[],l=[];return{add:function(a,h,n,m){var t=x(k,a),u=q[t];u||(u={events:{},typeCount:0},t=k.push(a)-1,q.push(u),l.push(e?{supplied:[],wrapped:[],useCount:[]}:null));u.events[h]||(u.events[h]=[],u.typeCount++);if(-1===x(u.events[h],n)){if(e){var t=l[t],p=x(t.supplied,n),r=t.wrapped[p]||function(e){e.immediatePropagationStopped||(e.target=e.srcElement,e.currentTarget=a,e.preventDefault=e.preventDefault||b,e.stopPropagation=e.stopPropagation||c,e.stopImmediatePropagation=e.stopImmediatePropagation||d,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+U(a).document.documentElement.scrollLeft,e.pageY=e.clientY+U(a).document.documentElement.scrollTop),n(e))};m=a[f](g+h,r,!!m);-1===p?(t.supplied.push(n),t.wrapped.push(r),t.useCount.push(1)):t.useCount[p]++}else m=a[f](h,n,m||!1);u.events[h].push(n);return m}},remove:a,useAttachEvent:e,_elements:k,_targets:q,_attachedListeners:l}}(),za={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};va.prototype={getPageXY:function(a,b){return Aa(a,b,this)},getClientXY:function(a,b){return Ta(a,b,this)},setEventXY:function(a,b){var c=1<b.length?Va(b):b[0];Aa(c,ka,this);a.page.x=ka.x;a.page.y=ka.y;Ta(c,ka,this);a.client.x=ka.x;a.client.y=ka.y;a.timeStamp=(new Date).getTime()},pointerOver:function(a,b,c){function d(a,b){a&&ta(a,c)&&!Z(a,c,c)&&aa(a,c,c)&&P(c,b)&&(e.push(a),f.push(c))}if(!this.prepared.name&&this.mouse){var e=[],f=[],h=this.element;this.addPointer(a);!this.target||!Z(this.target,this.element,c)&&aa(this.target,this.element,c)||(this.element=this.target=null,this.matches=[],this.matchElements=[]);var g=B.get(c),k=g&&!Z(g,c,c)&&aa(g,c,c)&&W(g.getAction(a,b,this,c),g);k&&!ga(g,c,k)&&(k=null);k?(this.target=g,this.element=c,this.matches=[],this.matchElements=[]):(B.forEachSelector(d),this.validateSelector(a,b,e,f)?(this.matches=e,this.matchElements=f,this.pointerHover(a,b,this.matches,this.matchElements),l.add(c,Q?H.move:"mousemove",n.pointerHover)):this.target&&(Y(h,c)?(this.pointerHover(a,b,this.matches,this.matchElements),l.add(this.element,Q?H.move:"mousemove",n.pointerHover)):(this.element=this.target=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(a,b,c,d,e,f){c=this.target;if(!this.prepared.name&&this.mouse){var h;this.setEventXY(this.curCoords,[a]);e?h=this.validateSelector(a,b,e,f):c&&(h=W(c.getAction(this.pointers[0],b,this,this.element),this.target));c&&c.options.styleCursor&&(c._doc.documentElement.style.cursor=h?db(h):"")}else this.prepared.name&&this.checkAndPreventDefault(b,c,this.element)},pointerOut:function(a,b,c){this.prepared.name||(B.get(c)||l.remove(c,Q?H.move:"mousemove",n.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(a,b,c,d){function e(a,b,d){d=ja?d.querySelectorAll(b):void 0;ta(a,g)&&!Z(a,g,c)&&aa(a,g,c)&&P(g,b,d)&&(f.matches.push(a),f.matchElements.push(g))}var f=this,h=l.useAttachEvent?z({},b):b,g=c,k=this.addPointer(a),q;this.holdTimers[k]=setTimeout(function(){f.pointerHold(l.useAttachEvent?h:a,h,c,d)},D._holdDuration);this.pointerIsDown=!0;if(this.inertiaStatus.active&&this.target.selector)for(;w(g);){if(g===this.element&&W(this.target.getAction(a,b,this,this.element),this.target).name===this.prepared.name){X(this.inertiaStatus.i);this.inertiaStatus.active=!1;this.collectEventTargets(a,b,c,"down");return}g=J(g)}if(!this.interacting()){this.setEventXY(this.curCoords,[a]);for(this.downEvent=b;w(g)&&!q;)this.matches=[],this.matchElements=[],B.forEachSelector(e),q=this.validateSelector(a,b,this.matches,this.matchElements),g=J(g);if(q)return this.prepared.name=q.name,this.prepared.axis=q.axis,this.prepared.edges=q.edges,this.collectEventTargets(a,b,c,"down"),this.pointerDown(a,b,c,d,q);this.downTimes[k]=(new Date).getTime();this.downTargets[k]=c;pa(this.downPointer,a);qa(this.prevCoords,this.curCoords);this.pointerWasMoved=!1}this.collectEventTargets(a,b,c,"down")},pointerDown:function(a,b,c,d,e){if(!e&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name)this.checkAndPreventDefault(b,this.target,this.element);else{this.pointerIsDown=!0;this.downEvent=b;var f=this.addPointer(a),h;if(1<this.pointerIds.length&&this.target._element===this.element){var g=W(e||this.target.getAction(a,b,this,this.element),this.target);ga(this.target,this.element,g)&&(h=g);this.prepared.name=null}else this.prepared.name||(g=B.get(d))&&!Z(g,d,c)&&aa(g,d,c)&&(h=W(e||g.getAction(a,b,this,d),g,c))&&ga(g,d,h)&&(this.target=g,this.element=d);var k=(g=this.target)&&g.options;!g||!e&&this.prepared.name?this.inertiaStatus.active&&d===this.element&&W(g.getAction(a,b,this,this.element),g).name===this.prepared.name&&(X(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(b,g,this.element)):(h=h||W(e||g.getAction(a,b,this,d),g,this.element),this.setEventXY(this.startCoords,this.pointers),h&&(k.styleCursor&&(g._doc.documentElement.style.cursor=db(h)),this.resizeAxes="resize"===h.name?h.axis:null,"gesture"===h&&2>this.pointerIds.length&&(h=null),this.prepared.name=h.name,this.prepared.axis=h.axis,this.prepared.edges=h.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[f]=(new Date).getTime(),this.downTargets[f]=c,pa(this.downPointer,a),qa(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(b,g,this.element)))}},setModifications:function(a,b){var c=this.target,d=!0,e=Ja(c,this.prepared.name)&&(!c.options[this.prepared.name].snap.endOnly||b),c=Ka(c,this.prepared.name)&&(!c.options[this.prepared.name].restrict.endOnly||b);e?this.setSnapping(a):this.snapStatus.locked=!1;c?this.setRestriction(a):this.restrictStatus.restricted=!1;e&&this.snapStatus.locked&&!this.snapStatus.changed?d=c&&this.restrictStatus.restricted&&this.restrictStatus.changed:c&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(d=!1);return d},setStartOffsets:function(a,b,c){a=b.getRect(c);var d=ma(b,c);c=b.options[this.prepared.name].snap;b=b.options[this.prepared.name].restrict;var e,f;a?(this.startOffset.left=this.startCoords.page.x-a.left,this.startOffset.top=this.startCoords.page.y-a.top,this.startOffset.right=a.right-this.startCoords.page.x,this.startOffset.bottom=a.bottom-this.startCoords.page.y,e="width"in a?a.width:a.right-a.left,f="height"in a?a.height:a.bottom-a.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0;this.snapOffsets.splice(0);d=c&&"startCoords"===c.offset?{x:this.startCoords.page.x-d.x,y:this.startCoords.page.y-d.y}:c&&c.offset||{x:0,y:0};if(a&&c&&c.relativePoints&&c.relativePoints.length)for(var h=0;h<c.relativePoints.length;h++)this.snapOffsets.push({x:this.startOffset.left-e*c.relativePoints[h].x+d.x,y:this.startOffset.top-f*c.relativePoints[h].y+d.y});else this.snapOffsets.push(d);a&&b.elementRect?(this.restrictOffset.left=this.startOffset.left-e*b.elementRect.left,this.restrictOffset.top=this.startOffset.top-f*b.elementRect.top,this.restrictOffset.right=this.startOffset.right-e*(1-b.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-f*(1-b.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(a,b,c){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===a.name?2:1)||(-1===x(v,this)&&v.push(this),this.prepared.name||this.setEventXY(this.startCoords,this.pointers),this.prepared.name=a.name,this.prepared.axis=a.axis,this.prepared.edges=a.edges,this.target=b,this.element=c,this.setStartOffsets(a.name,b,c),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(a,b,c,d,e){if(this.inertiaStatus.active){d=this.inertiaStatus.upCoords.page;var f=this.inertiaStatus.upCoords.client;this.setEventXY(this.curCoords,[{pageX:d.x+this.inertiaStatus.sx,pageY:d.y+this.inertiaStatus.sy,clientX:f.x+this.inertiaStatus.sx,clientY:f.y+this.inertiaStatus.sy}])}else this.recordPointer(a),this.setEventXY(this.curCoords,this.pointers);d=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var h,g,f=this.mouse?0:x(this.pointerIds,M(a));this.pointerIsDown&&!this.pointerWasMoved&&(h=this.curCoords.client.x-this.startCoords.client.x,g=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=ea(h,g)>Na);d||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[f]),this.collectEventTargets(a,b,c,"move"));if(this.pointerIsDown)if(d&&this.pointerWasMoved&&!e)this.checkAndPreventDefault(b,this.target,this.element);else if(Qa(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||a instanceof F&&/inertiastart/.test(a.type))){if(!this.interacting()&&(Qa(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){h=Math.abs(h);g=Math.abs(g);d=this.target.options.drag.axis;var k=h>g?"x":h<g?"y":"xy";if("xy"!==k&&"xy"!==d&&d!==k){this.prepared.name=null;for(var q=c;w(q);){if((g=B.get(q))&&g!==this.target&&!g.options.drag.manualStart&&"drag"===g.getAction(this.downPointer,this.downEvent,this,q).name&&Ya(k,g)){this.prepared.name="drag";this.target=g;this.element=q;break}q=J(q)}if(!this.prepared.name){var l=this;g=function(a,b,d){d=ja?d.querySelectorAll(b):void 0;if(a!==l.target&&ta(a,c)&&!a.options.drag.manualStart&&!Z(a,q,c)&&aa(a,q,c)&&P(q,b,d)&&"drag"===a.getAction(l.downPointer,l.downEvent,l,q).name&&Ya(k,a)&&ga(a,q,"drag"))return a};for(q=c;w(q);){if(h=B.forEachSelector(g)){this.prepared.name="drag";this.target=h;this.element=q;break}q=J(q)}}}}if((g=!!this.prepared.name&&!this.interacting())&&(this.target.options[this.prepared.name].manualStart||!ga(this.target,this.element,this.prepared))){this.stop(b);return}if(this.prepared.name&&this.target){g&&this.start(this.prepared,this.target,this.element);if(this.setModifications(this.curCoords.page,e)||g)this.prevEvent=this[this.prepared.name+"Move"](b);this.checkAndPreventDefault(b,this.target,this.element)}}qa(this.prevCoords,this.curCoords);(this.dragging||this.resizing)&&this.autoScrollMove(a)}},dragStart:function(a){var b=new F(this,a,"drag","start",this.element);this.dragging=!0;this.target.fire(b);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];this.dynamicDrop||this.setActiveDrops(this.element);a=this.getDropEvents(a,b);a.activate&&this.fireActiveDrops(a.activate);return b},dragMove:function(a){var b=this.target,c=new F(this,a,"drag","move",this.element),d=this.getDrop(c,a,this.element);this.dropTarget=d.dropzone;this.dropElement=d.element;a=this.getDropEvents(a,c);b.fire(c);a.leave&&this.prevDropTarget.fire(a.leave);a.enter&&this.dropTarget.fire(a.enter);a.move&&this.dropTarget.fire(a.move);this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;return c},resizeStart:function(a){a=new F(this,a,"resize","start",this.element);if(this.prepared.edges){var b=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var c=z({},this.prepared.edges);c.top=c.top||c.left&&!c.bottom;c.left=c.left||c.top&&!c.right;c.bottom=c.bottom||c.right&&!c.top;c.right=c.right||c.bottom&&!c.left;this.prepared._linkedEdges=c}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=b.width/b.height);this.resizeRects={start:b,current:z({},b),restricted:z({},b),previous:z({},b),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};a.rect=this.resizeRects.restricted;a.deltaRect=this.resizeRects.delta}this.target.fire(a);this.resizing=!0;return a},resizeMove:function(a){a=new F(this,a,"resize","move",this.element);var b=this.prepared.edges,c=this.target.options.resize.invert,d="reposition"===c||"negate"===c;if(b){var e=a.dx,f=a.dy,h=this.resizeRects.start,g=this.resizeRects.current,k=this.resizeRects.restricted,q=this.resizeRects.delta,l=z(this.resizeRects.previous,k),t=b;if(this.target.options.resize.preserveAspectRatio){var n=this.resizeStartAspectRatio,b=this.prepared._linkedEdges;if(t.left&&t.bottom||t.right&&t.top||t.bottomleft||t.topright)f=-e/n;else if(t.bottomright||t.topleft)e=f/n;else if(t.left||t.right)f=e/n;else if(t.top||t.bottom)e=f*n}else if(this.target.options.resize.square)if(b=this.prepared._linkedEdges,t.left&&t.bottom||t.right&&t.top)f=-e;else if(t.left||t.right)f=e;else if(t.top||t.bottom)e=f;b.top&&(g.top+=f);b.bottom&&(g.bottom+=f);b.left&&(g.left+=e);b.right&&(g.right+=e);b.topleft&&(g.left+=e,g.top+=f);b.bottomleft&&(g.left+=e,g.bottom+=f);b.topright&&(g.right+=e,g.top+=f);b.bottomright&&(g.right+=e,g.bottom+=f);d?(z(k,g),"reposition"===c&&(k.top>k.bottom&&(b=k.top,k.top=k.bottom,k.bottom=b),k.left>k.right&&(b=k.left,k.left=k.right,k.right=b))):(k.top=Math.min(g.top,h.bottom),k.bottom=Math.max(g.bottom,h.top),k.left=Math.min(g.left,h.right),k.right=Math.max(g.right,h.left));k.width=k.right-k.left;k.height=k.bottom-k.top;for(var m in k)q[m]=k[m]-l[m];a.edges=this.prepared.edges;a.rect=k;a.deltaRect=q}this.target.fire(a);return a},gestureStart:function(a){a=new F(this,a,"gesture","start",this.element);a.ds=0;this.gesture.startDistance=this.gesture.prevDistance=a.distance;this.gesture.startAngle=this.gesture.prevAngle=a.angle;this.gesture.scale=1;this.gesturing=!0;this.target.fire(a);return a},gestureMove:function(a){if(!this.pointerIds.length)return this.prevEvent;a=new F(this,a,"gesture","move",this.element);a.ds=a.scale-this.gesture.scale;this.target.fire(a);this.gesture.prevAngle=a.angle;this.gesture.prevDistance=a.distance;Infinity===a.scale||null===a.scale||void 0===a.scale||isNaN(a.scale)||(this.gesture.scale=a.scale);return a},pointerHold:function(a,b,c){this.collectEventTargets(a,b,c,"hold")},pointerUp:function(a,b,c,d){var e=this.mouse?0:x(this.pointerIds,M(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,b,c,"up");this.collectEventTargets(a,b,c,"tap");this.pointerEnd(a,b,c,d);this.removePointer(a)},pointerCancel:function(a,b,c,d){var e=this.mouse?0:x(this.pointerIds,M(a));clearTimeout(this.holdTimers[e]);this.collectEventTargets(a,b,c,"cancel");this.pointerEnd(a,b,c,d);this.removePointer(a)},ie8Dblclick:function(a,b,c){this.prevTap&&b.clientX===this.prevTap.clientX&&b.clientY===this.prevTap.clientY&&c===this.prevTap.target&&(this.downTargets[0]=c,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(a,b,c,"tap"))},pointerEnd:function(a,b,c,d){var e,f=this.target,h=f&&f.options,g=h&&this.prepared.name&&h[this.prepared.name].inertia;e=this.inertiaStatus;if(this.interacting()){if(e.active&&!e.ending)return;var k=(new Date).getTime(),q,l=!1,n=Ja(f,this.prepared.name)&&h[this.prepared.name].snap.endOnly,m=Ka(f,this.prepared.name)&&h[this.prepared.name].restrict.endOnly,p=0,r=0,h=this.dragging?"x"===h.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===h.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,g=(q=g&&g.enabled&&"gesture"!==this.prepared.name&&b!==e.startEvent)&&50>k-this.curCoords.timeStamp&&h>g.minSpeed&&h>g.endSpeed;q&&!g&&(n||m)&&(q={},q.snap=q.restrict=q,n&&(this.setSnapping(this.curCoords.page,q),q.locked&&(p+=q.dx,r+=q.dy)),m&&(this.setRestriction(this.curCoords.page,q),q.restricted&&(p+=q.dx,r+=q.dy)),p||r)&&(l=!0);if(g||l){qa(e.upCoords,this.curCoords);this.pointers[0]=e.startEvent=new F(this,b,this.prepared.name,"inertiastart",this.element);e.t0=k;f.fire(e.startEvent);g?(e.vx0=this.pointerDelta.client.vx,e.vy0=this.pointerDelta.client.vy,e.v0=h,this.calcInertia(e),b=z({},this.curCoords.page),f=ma(f,this.element),b.x=b.x+e.xe-f.x,b.y=b.y+e.ye-f.y,f={useStatusXY:!0,x:b.x,y:b.y,dx:0,dy:0,snap:null},f.snap=f,p=r=0,n&&(b=this.setSnapping(this.curCoords.page,f),b.locked&&(p+=b.dx,r+=b.dy)),m&&(f=this.setRestriction(this.curCoords.page,f),f.restricted&&(p+=f.dx,r+=f.dy)),e.modifiedXe+=p,e.modifiedYe+=r,e.i=S(this.boundInertiaFrame)):(e.smoothEnd=!0,e.xe=p,e.ye=r,e.sx=e.sy=0,e.i=S(this.boundSmoothEndFrame));e.active=!0;return}(n||m)&&this.pointerMove(a,b,c,d,!0)}this.dragging?(e=new F(this,b,"drag","end",this.element),m=this.getDrop(e,b,this.element),this.dropTarget=m.dropzone,this.dropElement=m.element,m=this.getDropEvents(b,e),m.leave&&this.prevDropTarget.fire(m.leave),m.enter&&this.dropTarget.fire(m.enter),m.drop&&this.dropTarget.fire(m.drop),m.deactivate&&this.fireActiveDrops(m.deactivate),f.fire(e)):this.resizing?(e=new F(this,b,"resize","end",this.element),f.fire(e)):this.gesturing&&(e=new F(this,b,"gesture","end",this.element),f.fire(e));this.stop(b)},collectDrops:function(a){var b=[],c=[],d;a=a||this.element;for(d=0;d<B.length;d++)if(B[d].options.drop.enabled){var e=B[d],f=e.options.drop.accept;if(!(w(f)&&f!==a||L(f)&&!P(a,f)))for(var f=e.selector?e._context.querySelectorAll(e.selector):[e._element],h=0,g=f.length;h<g;h++){var k=f[h];k!==a&&(b.push(e),c.push(k))}}return{dropzones:b,elements:c}},fireActiveDrops:function(a){var b,c,d,e;for(b=0;b<this.activeDrops.dropzones.length;b++)c=this.activeDrops.dropzones[b],d=this.activeDrops.elements[b],d!==e&&(a.target=d,c.fire(a)),e=d},setActiveDrops:function(a){a=this.collectDrops(a,!0);this.activeDrops.dropzones=a.dropzones;this.activeDrops.elements=a.elements;this.activeDrops.rects=[];for(a=0;a<this.activeDrops.dropzones.length;a++)this.activeDrops.rects[a]=this.activeDrops.dropzones[a].getRect(this.activeDrops.elements[a])},getDrop:function(a,b,c){var d=[];Ma&&this.setActiveDrops(c);for(var e=0;e<this.activeDrops.dropzones.length;e++){var f=this.activeDrops.elements[e];d.push(this.activeDrops.dropzones[e].dropCheck(a,b,this.target,c,f,this.activeDrops.rects[e])?f:null)}c=(b=d[0])?0:-1;for(var h,e=[],g,f=1;f<d.length;f++)if((a=d[f])&&a!==b)if(!b)b=a,c=f;else if(a.parentNode!==a.ownerDocument)if(b.parentNode===a.ownerDocument)b=a,c=f;else{if(!e.length)for(h=b;h.parentNode&&h.parentNode!==h.ownerDocument;)e.unshift(h),h=h.parentNode;if(b instanceof pb&&a instanceof Ua&&!(a instanceof ob)){if(a===b.parentNode)continue;h=a.ownerSVGElement}else h=a;for(g=[];h.parentNode!==h.ownerDocument;)g.unshift(h),h=h.parentNode;for(h=0;g[h]&&g[h]===e[h];)h++;h=[g[h-1],g[h],e[h]];for(g=h[0].lastChild;g;){if(g===h[1]){b=a;c=f;e=[];break}else if(g===h[2])break;g=g.previousSibling}}d=c;return{dropzone:this.activeDrops.dropzones[d]||null,element:this.activeDrops.elements[d]||null}},getDropEvents:function(a,b){var c={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(c.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dragleave"},b.dragLeave=this.prevDropElement,b.prevDropzone=this.prevDropTarget),this.dropTarget&&(c.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dragenter"},b.dragEnter=this.dropElement,b.dropzone=this.dropTarget));"dragend"===b.type&&this.dropTarget&&(c.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"drop"},b.dropzone=this.dropTarget);"dragstart"===b.type&&(c.activate={target:null,dropzone:null,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dropactivate"});"dragend"===b.type&&(c.deactivate={target:null,dropzone:null,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,timeStamp:b.timeStamp,type:"dropdeactivate"});"dragmove"===b.type&&this.dropTarget&&(c.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:b.target,draggable:b.interactable,dragEvent:b,interaction:this,dragmove:b,timeStamp:b.timeStamp,type:"dropmove"},b.dropzone=this.dropTarget);return c},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=this.target=this.element=null},stop:function(a){if(this.interacting()){p.stop();this.matches=[];this.matchElements=[];var b=this.target;b.options.styleCursor&&(b._doc.documentElement.style.cursor="");a&&A(a.preventDefault)&&this.checkAndPreventDefault(a,b,this.element);this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1;this.prepared.name=this.prevEvent=null;for(a=this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;a<this.pointers.length;a++)-1===x(this.pointerIds,M(this.pointers[a]))&&this.pointers.splice(a,1)},inertiaFrame:function(){var a,b,c=this.inertiaStatus;a=this.target.options[this.prepared.name].inertia.resistance;b=(new Date).getTime()/1E3-c.t0;if(b<c.te){b=1-(Math.exp(-a*b)-c.lambda_v0)/c.one_ve_v0;if(c.modifiedXe===c.xe&&c.modifiedYe===c.ye)c.sx=c.xe*b,c.sy=c.ye*b;else{var d=c.ye,e=c.modifiedYe;a=Wa(b,0,c.xe,c.modifiedXe);b=Wa(b,0,d,e);c.sx=a;c.sy=b}this.pointerMove(c.startEvent,c.startEvent);c.i=S(this.boundInertiaFrame)}else c.ending=!0,c.sx=c.modifiedXe,c.sy=c.modifiedYe,this.pointerMove(c.startEvent,c.startEvent),this.pointerEnd(c.startEvent,c.startEvent),c.active=c.ending=!1},smoothEndFrame:function(){var a=this.inertiaStatus,b=(new Date).getTime()-a.t0,c=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(b<c){var d;d=b/c;a.sx=-a.xe*d*(d-2)+0;b/=c;a.sy=-a.ye*b*(b-2)+0;this.pointerMove(a.startEvent,a.startEvent);a.i=S(this.boundSmoothEndFrame)}else a.ending=!0,a.sx=a.xe,a.sy=a.ye,this.pointerMove(a.startEvent,a.startEvent),this.pointerEnd(a.startEvent,a.startEvent),a.smoothEnd=a.active=a.ending=!1},addPointer:function(a){var b=M(a),c=this.mouse?0:x(this.pointerIds,b);-1===c&&(c=this.pointerIds.length);this.pointerIds[c]=b;this.pointers[c]=a;return c},removePointer:function(a){a=M(a);a=this.mouse?0:x(this.pointerIds,a);-1!==a&&(this.pointers.splice(a,1),this.pointerIds.splice(a,1),this.downTargets.splice(a,1),this.downTimes.splice(a,1),this.holdTimers.splice(a,1))},recordPointer:function(a){var b=this.mouse?0:x(this.pointerIds,M(a));-1!==b&&(this.pointers[b]=a)},collectEventTargets:function(a,b,c,d){function e(a,b,e){e=ja?e.querySelectorAll(b):void 0;a._iEvents[d]&&w(k)&&ta(a,k)&&!Z(a,k,c)&&aa(a,k,c)&&P(k,b,e)&&(h.push(a),g.push(k))}var f=this.mouse?0:x(this.pointerIds,M(a));if("tap"!==d||!this.pointerWasMoved&&this.downTargets[f]&&this.downTargets[f]===c){for(var h=[],g=[],k=c;k;)m.isSet(k)&&m(k)._iEvents[d]&&(h.push(m(k)),g.push(k)),B.forEachSelector(e),k=J(k);(h.length||"tap"===d)&&this.firePointers(a,b,c,h,g,d)}},firePointers:function(a,b,c,d,e,f){var h=this.mouse?0:x(this.pointerIds,M(a)),g={},k,l;"doubletap"===f?g=a:(pa(g,b),b!==a&&pa(g,a),g.preventDefault=cb,g.stopPropagation=F.prototype.stopPropagation,g.stopImmediatePropagation=F.prototype.stopImmediatePropagation,g.interaction=this,g.timeStamp=(new Date).getTime(),g.originalEvent=b,g.originalPointer=a,g.type=f,g.pointerId=M(a),g.pointerType=this.mouse?"mouse":Q?L(a.pointerType)?a.pointerType:[,,"touch","pen","mouse"][a.pointerType]:"touch");"tap"===f&&(g.dt=g.timeStamp-this.downTimes[h],k=g.timeStamp-this.tapTime,l=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===g.target&&500>k),g["double"]=l,this.tapTime=g.timeStamp);for(a=0;a<d.length&&!(g.currentTarget=e[a],g.interactable=d[a],d[a].fire(g),g.immediatePropagationStopped||g.propagationStopped&&e[a+1]!==g.currentTarget);a++);l?(d={},z(d,g),d.dt=k,d.type="doubletap",this.collectEventTargets(d,b,c,"doubletap"),this.prevTap=d):"tap"===f&&(this.prevTap=g)},validateSelector:function(a,b,c,d){for(var e=0,f=c.length;e<f;e++){var h=c[e],g=d[e],k=W(h.getAction(a,b,this,g),h);if(k&&ga(h,g,k))return this.target=h,this.element=g,k}},setSnapping:function(a,b){var c=this.target.options[this.prepared.name].snap,d=[],e,f,h;b=b||this.snapStatus;b.useStatusXY?f={x:b.x,y:b.y}:(e=ma(this.target,this.element),f=z({},a),f.x-=e.x,f.y-=e.y);b.realX=f.x;b.realY=f.y;f.x-=this.inertiaStatus.resumeDx;f.y-=this.inertiaStatus.resumeDy;for(var g=c.targets?c.targets.length:0,k=0;k<this.snapOffsets.length;k++){var l=f.x-this.snapOffsets[k].x,m=f.y-this.snapOffsets[k].y;for(h=0;h<g;h++)(e=A(c.targets[h])?c.targets[h](l,m,this):c.targets[h])&&d.push({x:I(e.x)?e.x+this.snapOffsets[k].x:l,y:I(e.y)?e.y+this.snapOffsets[k].y:m,range:I(e.range)?e.range:c.range})}var c=null,k=!1,n=0,p=0;h=m=l=0;for(g=d.length;h<g;h++){e=d[h];var r=e.range,v=e.x-f.x,x=e.y-f.y,w=ea(v,x),y=w<=r;Infinity===r&&k&&Infinity!==p&&(y=!1);if(!c||(y?k&&Infinity!==r?w/r<n/p:Infinity===r&&Infinity!==p||w<n:!k&&w<n))Infinity===r&&(y=!0),c=e,n=w,p=r,k=y,l=v,m=x,b.range=r}c?(d=b.snappedX!==c.x||b.snappedY!==c.y,b.snappedX=c.x,b.snappedY=c.y):(d=!0,b.snappedX=NaN,b.snappedY=NaN);b.dx=l;b.dy=m;b.changed=d||k&&!b.locked;b.locked=k;return b},setRestriction:function(a,b){var c=this.target,d=c&&c.options[this.prepared.name].restrict,e=d&&d.restriction;if(!e)return b;b=b||this.restrictStatus;d=b.useStatusXY?d={x:b.x,y:b.y}:d=z({},a);b.snap&&b.snap.locked&&(d.x+=b.snap.dx||0,d.y+=b.snap.dy||0);d.x-=this.inertiaStatus.resumeDx;d.y-=this.inertiaStatus.resumeDy;b.dx=0;b.dy=0;b.restricted=!1;if(L(e)&&(e="parent"===e?J(this.element):"self"===e?c.getRect(this.element):Ha(this.element,e),!e))return b;A(e)&&(e=e(d.x,d.y,this.element));w(e)&&(e=sa(e));(c=e)?"x"in e&&"y"in e?(e=Math.max(Math.min(c.x+c.width-this.restrictOffset.right,d.x),c.x+this.restrictOffset.left),c=Math.max(Math.min(c.y+c.height-this.restrictOffset.bottom,d.y),c.y+this.restrictOffset.top)):(e=Math.max(Math.min(c.right-this.restrictOffset.right,d.x),c.left+this.restrictOffset.left),c=Math.max(Math.min(c.bottom-this.restrictOffset.bottom,d.y),c.top+this.restrictOffset.top)):(e=d.x,c=d.y);b.dx=e-d.x;b.dy=c-d.y;b.changed=b.restrictedX!==e||b.restrictedY!==c;b.restricted=!(!b.dx&&!b.dy);b.restrictedX=e;b.restrictedY=c;return b},checkAndPreventDefault:function(a,b,c){if(b=b||this.target){b=b.options;var d=b.preventDefault;"auto"===d&&c&&!/^(input|select|textarea)$/i.test(a.target.nodeName)?/down|start/i.test(a.type)&&"drag"===this.prepared.name&&"xy"!==b.drag.axis||b[this.prepared.name]&&b[this.prepared.name].manualStart&&!this.interacting()||a.preventDefault():"always"===d&&a.preventDefault()}},calcInertia:function(a){var b=this.target.options[this.prepared.name].inertia,c=b.resistance,d=-Math.log(b.endSpeed/a.v0)/c;a.x0=this.prevEvent.pageX;a.y0=this.prevEvent.pageY;a.t0=a.startEvent.timeStamp/1E3;a.sx=a.sy=0;a.modifiedXe=a.xe=(a.vx0-d)/c;a.modifiedYe=a.ye=(a.vy0-d)/c;a.te=d;a.lambda_v0=c/a.v0;a.one_ve_v0=1-b.endSpeed/a.v0},autoScrollMove:function(a){var b;if(b=this.interacting()){b=this.prepared.name;var c=this.target.options;/^resize/.test(b)&&(b="resize");b=c[b].autoScroll&&c[b].autoScroll.enabled}if(b)if(this.inertiaStatus.active)p.x=p.y=0;else{var d,e=this.target.options[this.prepared.name].autoScroll,f=e.container||U(this.element);ya(f)?(d=a.clientX<p.margin,b=a.clientY<p.margin,c=a.clientX>f.innerWidth-p.margin,a=a.clientY>f.innerHeight-p.margin):(f=Ca(f),d=a.clientX<f.left+p.margin,b=a.clientY<f.top+p.margin,c=a.clientX>f.right-p.margin,a=a.clientY>f.bottom-p.margin);p.x=c?1:d?-1:0;p.y=a?1:b?-1:0;p.isScrolling||(p.margin=e.margin,p.speed=e.speed,p.start(this))}},_updateEventTargets:function(a,b){this._eventTarget=a;this._curEventTarget=b}};F.prototype={preventDefault:la,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var n={},jb="dragStart dragMove resizeStart resizeMove gestureStart gestureMove pointerOver pointerOut pointerHover selectorDown pointerDown pointerMove pointerUp pointerCancel pointerEnd addPointer removePointer recordPointer autoScrollMove".split(" "),Oa=0,Pa=jb.length;Oa<Pa;Oa++){var kb=jb[Oa];n[kb]=$a(kb)}B.indexOfElement=function(a,b){b=b||O;for(var c=0;c<this.length;c++){var d=this[c];if(d.selector===a&&d._context===b||!d.selector&&d._element===a)return c}return-1};B.get=function(a,b){return this[this.indexOfElement(a,b&&b.context)]};B.forEachSelector=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(c.selector&&(c=a(c,c.selector,c._context,b,this),void 0!==c))return c}};C.prototype={setOnEvents:function(a,b){"drop"===a?(A(b.ondrop)&&(this.ondrop=b.ondrop),A(b.ondropactivate)&&(this.ondropactivate=b.ondropactivate),A(b.ondropdeactivate)&&(this.ondropdeactivate=b.ondropdeactivate),A(b.ondragenter)&&(this.ondragenter=b.ondragenter),A(b.ondragleave)&&(this.ondragleave=b.ondragleave),A(b.ondropmove)&&(this.ondropmove=b.ondropmove)):(a="on"+a,A(b.onstart)&&(this[a+"start"]=b.onstart),A(b.onmove)&&(this[a+"move"]=b.onmove),A(b.onend)&&(this[a+"end"]=b.onend),A(b.oninertiastart)&&(this[a+"inertiastart"]=b.oninertiastart));return this},draggable:function(a){return y(a)?(this.options.drag.enabled=!1===a.enabled?!1:!0,this.setPerAction("drag",a),this.setOnEvents("drag",a),/^x$|^y$|^xy$/.test(a.axis)?this.options.drag.axis=a.axis:null===a.axis&&delete this.options.drag.axis,this):G(a)?(this.options.drag.enabled=a,this):this.options.drag},setPerAction:function(a,b){for(var c in b)c in D[a]&&(y(b[c])?(this.options[a][c]=z(this.options[a][c]||{},b[c]),y(D.perAction[c])&&"enabled"in D.perAction[c]&&(this.options[a][c].enabled=!1===b[c].enabled?!1:!0)):G(b[c])&&y(D.perAction[c])?this.options[a][c].enabled=b[c]:void 0!==b[c]&&(this.options[a][c]=b[c]))},dropzone:function(a){return y(a)?(this.options.drop.enabled=!1===a.enabled?!1:!0,this.setOnEvents("drop",a),/^(pointer|center)$/.test(a.overlap)?this.options.drop.overlap=a.overlap:I(a.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,a.overlap),0)),"accept"in a&&(this.options.drop.accept=a.accept),"checker"in a&&(this.options.drop.checker=a.checker),this):G(a)?(this.options.drop.enabled=a,this):this.options.drop},dropCheck:function(a,b,c,d,e,f){var h=!1;if(!(f=f||this.getRect(e)))return this.options.drop.checker?this.options.drop.checker(a,b,h,this,e,c,d):!1;var g=this.options.drop.overlap;if("pointer"===g){var k=Aa(a),h=ma(c,d);k.x+=h.x;k.y+=h.y;h=k.x>f.left&&k.x<f.right;k=k.y>f.top&&k.y<f.bottom;h=h&&k}k=c.getRect(d);if("center"===g)var h=k.left+k.width/2,l=k.top+k.height/2,h=h>=f.left&&h<=f.right&&l>=f.top&&l<=f.bottom;I(g)&&(h=Math.max(0,Math.min(f.right,k.right)-Math.max(f.left,k.left))*Math.max(0,Math.min(f.bottom,k.bottom)-Math.max(f.top,k.top))/(k.width*k.height)>=g);this.options.drop.checker&&(h=this.options.drop.checker(a,b,h,this,e,c,d));return h},dropChecker:function(a){return A(a)?(this.options.drop.checker=a,this):null===a?(delete this.options.getRect,this):this.options.drop.checker},accept:function(a){return w(a)||da(a)?(this.options.drop.accept=a,this):null===a?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(a){return y(a)?(this.options.resize.enabled=!1===a.enabled?!1:!0,this.setPerAction("resize",a),this.setOnEvents("resize",a),/^x$|^y$|^xy$/.test(a.axis)?this.options.resize.axis=a.axis:null===a.axis&&(this.options.resize.axis=D.resize.axis),G(a.preserveAspectRatio)?this.options.resize.preserveAspectRatio=a.preserveAspectRatio:G(a.square)&&(this.options.resize.square=a.square),this):G(a)?(this.options.resize.enabled=a,this):this.options.resize},squareResize:function(a){return G(a)?(this.options.resize.square=a,this):null===a?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(a){return y(a)?(this.options.gesture.enabled=!1===a.enabled?!1:!0,this.setPerAction("gesture",a),this.setOnEvents("gesture",a),this):G(a)?(this.options.gesture.enabled=a,this):this.options.gesture},autoScroll:function(a){y(a)?a=z({actions:["drag","resize"]},a):G(a)&&(a={actions:["drag","resize"],enabled:a});return this.setOptions("autoScroll",a)},snap:function(a){a=this.setOptions("snap",a);return a===this?this:a.drag},setOptions:function(a,b){var c=b&&ca(b.actions)?b.actions:["drag"],d;if(y(b)||G(b)){for(d=0;d<c.length;d++){var e=/resize/.test(c[d])?"resize":c[d];y(this.options[e])&&(e=this.options[e][a],y(b)?(z(e,b),e.enabled=!1===b.enabled?!1:!0,"snap"===a&&("grid"===e.mode?e.targets=[m.createSnapGrid(z({offset:e.gridOffset||{x:0,y:0}},e.grid||{}))]:"anchor"===e.mode?e.targets=e.anchors:"path"===e.mode&&(e.targets=e.paths),"elementOrigin"in b&&(e.relativePoints=[b.elementOrigin]))):G(b)&&(e.enabled=b))}return this}c={};e=["drag","resize","gesture"];for(d=0;d<e.length;d++)a in D[e[d]]&&(c[e[d]]=this.options[e[d]][a]);return c},inertia:function(a){a=this.setOptions("inertia",a);return a===this?this:a.drag},getAction:function(a,b,c,d){var e=this.defaultActionChecker(a,c,d);return this.options.actionChecker?this.options.actionChecker(a,b,e,this,d,c):e},defaultActionChecker:eb,actionChecker:function(a){return A(a)?(this.options.actionChecker=a,this):null===a?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(a){a=a||this._element;this.selector&&!w(a)&&(a=this._context.querySelector(this.selector));return sa(a)},rectChecker:function(a){return A(a)?(this.getRect=a,this):null===a?(delete this.options.getRect,this):this.getRect},styleCursor:function(a){return G(a)?(this.options.styleCursor=a,this):null===a?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(a){return/^(always|never|auto)$/.test(a)?(this.options.preventDefault=a,this):G(a)?(this.options.preventDefault=a?"always":"never",this):this.options.preventDefault},origin:function(a){return da(a)||y(a)?(this.options.origin=a,this):this.options.origin},deltaSource:function(a){return"page"===a||"client"===a?(this.options.deltaSource=a,this):this.options.deltaSource},restrict:function(a){if(!y(a))return this.setOptions("restrict",a);for(var b=["drag","resize","gesture"],c,d=0;d<b.length;d++){var e=b[d];e in a&&(c=z({actions:[e],restriction:a[e]},a),c=this.setOptions("restrict",c))}return c},context:function(){return this._context},_context:O,ignoreFrom:function(a){return da(a)||w(a)?(this.options.ignoreFrom=a,this):this.options.ignoreFrom},allowFrom:function(a){return da(a)||w(a)?(this.options.allowFrom=a,this):this.options.allowFrom},element:function(){return this._element},fire:function(a){if(!a||!a.type||-1===x(ba,a.type))return this;var b,c,d,e="on"+a.type;if(a.type in this._iEvents)for(b=this._iEvents[a.type],c=0,d=b.length;c<d&&!a.immediatePropagationStopped;c++)b[c](a);if(A(this[e]))this[e](a);if(a.type in T&&(b=T[a.type]))for(c=0,d=b.length;c<d&&!a.immediatePropagationStopped;c++)b[c](a);return this},on:function(a,b,c){var d;L(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(ca(a)){for(d=0;d<a.length;d++)this.on(a[d],b,c);return this}if(y(a)){for(d in a)this.on(d,a[d],b);return this}"wheel"===a&&(a=ib);c=c?!0:!1;if(-1!==x(ba,a))a in this._iEvents?this._iEvents[a].push(b):this._iEvents[a]=[b];else if(this.selector){if(!N[a])for(N[a]={selectors:[],contexts:[],listeners:[]},d=0;d<ia.length;d++)l.add(ia[d],a,oa),l.add(ia[d],a,xa,!0);a=N[a];for(d=a.selectors.length-1;0<=d&&(a.selectors[d]!==this.selector||a.contexts[d]!==this._context);d--);-1===d&&(d=a.selectors.length,a.selectors.push(this.selector),a.contexts.push(this._context),a.listeners.push([]));a.listeners[d].push([b,c])}else l.add(this._element,a,b,c);return this},off:function(a,b,c){var d;L(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(ca(a)){for(d=0;d<a.length;d++)this.off(a[d],b,c);return this}if(y(a)){for(var e in a)this.off(e,a[e],b);return this}e=-1;c=c?!0:!1;"wheel"===a&&(a=ib);if(-1!==x(ba,a))(c=this._iEvents[a])&&-1!==(e=x(c,b))&&this._iEvents[a].splice(e,1);else if(this.selector){var f=N[a],h=!1;if(!f)return this;for(e=f.selectors.length-1;0<=e;e--)if(f.selectors[e]===this.selector&&f.contexts[e]===this._context){var g=f.listeners[e];for(d=g.length-1;0<=d;d--){var k=g[d][1];if(g[d][0]===b&&k===c){g.splice(d,1);g.length||(f.selectors.splice(e,1),f.contexts.splice(e,1),f.listeners.splice(e,1),l.remove(this._context,a,oa),l.remove(this._context,a,xa,!0),f.selectors.length||(N[a]=null));h=!0;break}}if(h)break}}else l.remove(this._element,a,b,c);return this},set:function(a){y(a)||(a={});this.options=z({},D.base);var b,c=["drag","drop","resize","gesture"],d=["draggable","dropzone","resizable","gesturable"],e=z(z({},D.perAction),a[f]||{});for(b=0;b<c.length;b++){var f=c[b];this.options[f]=z({},D[f]);this.setPerAction(f,e);this[d[b]](a[f])}c="accept actionChecker allowFrom deltaSource dropChecker ignoreFrom origin preventDefault rectChecker styleCursor".split(" ");b=0;for(Pa=c.length;b<Pa;b++)if(d=c[b],this.options[d]=D.base[d],d in a)this[d](a[d]);return this},unset:function(){l.remove(this._element,"all");if(L(this.selector))for(var a in N)for(var b=N[a];0<b.selectors.length;){b.selectors[0]===this.selector&&b.contexts[0]===this._context&&(b.selectors.splice(0,1),b.contexts.splice(0,1),b.listeners.splice(0,1),b.selectors.length||(N[a]=null));l.remove(this._context,a,oa);l.remove(this._context,a,xa,!0);break}else l.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");this.dropzone(!1);B.splice(x(B,this),1);return m}};C.prototype.snap=K(C.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping");C.prototype.restrict=K(C.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction");C.prototype.inertia=K(C.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia");C.prototype.autoScroll=K(C.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll");C.prototype.squareResize=K(C.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square");C.prototype.accept=K(C.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead");C.prototype.dropChecker=K(C.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead");C.prototype.context=K(C.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead");m.isSet=function(a,b){return-1!==B.indexOfElement(a,b&&b.context)};m.on=function(a,b,c){L(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(ca(a)){for(var d=0;d<a.length;d++)m.on(a[d],b,c);return m}if(y(a)){for(d in a)m.on(d,a[d],b);return m}-1!==x(ba,a)?T[a]?T[a].push(b):T[a]=[b]:l.add(O,a,b,c);return m};m.off=function(a,b,c){L(a)&&-1!==a.search(" ")&&(a=a.trim().split(/ +/));if(ca(a)){for(var d=0;d<a.length;d++)m.off(a[d],b,c);return m}if(y(a)){for(d in a)m.off(d,a[d],b);return m}if(-1===x(ba,a))l.remove(O,a,b,c);else{var e;a in T&&-1!==(e=x(T[a],b))&&T[a].splice(e,1)}return m};m.enableDragging=K(function(a){return null!==a&&void 0!==a?(R.drag=a,m):R.drag},"interact.enableDragging is deprecated and will soon be removed.");m.enableResizing=K(function(a){return null!==a&&void 0!==a?(R.resize=a,m):R.resize},"interact.enableResizing is deprecated and will soon be removed.");m.enableGesturing=K(function(a){return null!==a&&void 0!==a?(R.gesture=a,m):R.gesture},"interact.enableGesturing is deprecated and will soon be removed.");m.eventTypes=ba;m.debug=function(){var a=v[0]||new va;return{interactions:v,target:a.target,dragging:a.dragging,resizing:a.resizing,gesturing:a.gesturing,prepared:a.prepared,matches:a.matches,matchElements:a.matchElements,prevCoords:a.prevCoords,startCoords:a.startCoords,pointerIds:a.pointerIds,pointers:a.pointers,addPointer:n.addPointer,removePointer:n.removePointer,recordPointer:n.recordPointer,snap:a.snapStatus,restrict:a.restrictStatus,inertia:a.inertiaStatus,downTime:a.downTimes[0],downEvent:a.downEvent,downPointer:a.downPointer,prevEvent:a.prevEvent,Interactable:C,interactables:B,pointerIsDown:a.pointerIsDown,defaultOptions:D,defaultActionChecker:eb,actionCursors:wa,dragMove:n.dragMove,resizeMove:n.resizeMove,gestureMove:n.gestureMove,pointerUp:n.pointerUp,pointerDown:n.pointerDown,pointerMove:n.pointerMove,pointerHover:n.pointerHover,eventTypes:ba,events:l,globalEvents:T,delegatedEvents:N,prefixedPropREs:za}};m.getPointerAverage=Va;m.getTouchBBox=Ea;m.getTouchDistance=Fa;m.getTouchAngle=Ga;m.getElementRect=sa;m.getElementClientRect=Ca;m.matchesSelector=P;m.closest=Ha;m.margin=K(function(a){return I(a)?(na=a,m):na},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.");m.supportsTouch=function(){return fa};m.supportsPointerEvent=function(){return Q};m.stop=function(a){for(var b=v.length-1;0<=b;b--)v[b].stop(a);return m};m.dynamicDrop=function(a){return G(a)?(Ma=a,m):Ma};m.pointerMoveTolerance=function(a){return I(a)?(Na=a,this):Na};m.maxInteractions=function(a){return I(a)?(ua=a,this):ua};m.createSnapGrid=function(a){return function(b,c){var d=0,e=0;y(a.offset)&&(d=a.offset.x,e=a.offset.y);return{x:Math.round((b-d)/a.x)*a.x+d,y:Math.round((c-e)/a.y)*a.y+e,range:a.range}}};fb(O);La in Element.prototype&&A(Element.prototype[La])||(ja=function(a,b,c){c=c||a.parentNode.querySelectorAll(b);b=0;for(var d=c.length;b<d;b++)if(c[b]===a)return!0;return!1});(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!E.requestAnimationFrame;++c)S=E[b[c]+"RequestAnimationFrame"],X=E[b[c]+"CancelAnimationFrame"]||E[b[c]+"CancelRequestAnimationFrame"];S||(S=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),h=setTimeout(function(){b(c+d)},d);a=c+d;return h});X||(X=function(a){clearTimeout(a)})})();"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=m),exports.interact=m):"function"===typeof define&&define.amd?define("interact",function(){return m}):E.interact=m}})("undefined"===typeof window?void 0:window);
