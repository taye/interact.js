{"version":3,"file":"raf.prod.js","sources":["raf.ts"],"sourcesContent":["let lastTime = 0\nlet request: typeof requestAnimationFrame\nlet cancel: typeof cancelAnimationFrame\n\nfunction init(global: Window | typeof globalThis) {\n  request = global.requestAnimationFrame\n  cancel = global.cancelAnimationFrame\n\n  if (!request) {\n    const vendors = ['ms', 'moz', 'webkit', 'o']\n\n    for (const vendor of vendors) {\n      request = global[`${vendor}RequestAnimationFrame` as 'requestAnimationFrame']\n      cancel =\n        global[`${vendor}CancelAnimationFrame` as 'cancelAnimationFrame'] ||\n        global[`${vendor}CancelRequestAnimationFrame` as 'cancelAnimationFrame']\n    }\n  }\n\n  request = request && request.bind(global)\n  cancel = cancel && cancel.bind(global)\n\n  if (!request) {\n    request = (callback) => {\n      const currTime = Date.now()\n      const timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      const token = global.setTimeout(() => {\n        // eslint-disable-next-line n/no-callback-literal\n        callback(currTime + timeToCall)\n      }, timeToCall)\n\n      lastTime = currTime + timeToCall\n      return token as any\n    }\n\n    cancel = (token) => clearTimeout(token)\n  }\n}\n\nexport default {\n  request: (callback: FrameRequestCallback) => request(callback),\n  cancel: (token: number) => cancel(token),\n  init,\n}\n"],"names":["request","cancel","lastTime","init","global","requestAnimationFrame","cancelAnimationFrame","vendors","vendor","bind","callback","currTime","Date","now","timeToCall","Math","max","token","setTimeout","clearTimeout","raf"],"mappings":";;AAAA,IACIA,QACAC,OAFAC,SAAW,EAIf,SAASC,KAAKC,GAIZ,GAHAJ,QAAUI,EAAOC,sBACjBJ,OAASG,EAAOE,sBAEXN,QAAS,CACZ,MAAMO,EAAU,CAAC,KAAM,MAAO,SAAU,KAExC,IAAK,MAAMC,KAAUD,EACnBP,QAAUI,EAAUI,EAAF,yBAClBP,OACEG,EAAUI,EAAF,yBACRJ,EAAUI,EAAF,8BAEd,CAEAR,QAAUA,SAAWA,QAAQS,KAAKL,GAClCH,OAASA,QAAUA,OAAOQ,KAAKL,GAE1BJ,UACHA,QAAWU,IACT,MAAMC,EAAWC,KAAKC,MAChBC,EAAaC,KAAKC,IAAI,EAAG,IAAML,EAAWT,WAC1Ce,EAAQb,EAAOc,YAAW,KAE9BR,EAASC,EAAWG,EAAW,GAC9BA,GAGH,OADAZ,SAAWS,EAAWG,EACfG,CAAK,EAGdhB,OAAUgB,GAAUE,aAAaF,GAErC,CAEA,IAAeG,IAAA,CACbpB,OAA6D,CAAnDU,GAAmCV,eAAQU,EAAS,EAC9DT,MAAuC,CAA9BgB,GAAkBhB,cAAOgB,EAAM,EACxCd"}