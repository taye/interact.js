{"version":3,"file":"edges.prod.js","sources":["edges.ts"],"sourcesContent":["// This modifier adds the options.resize.restrictEdges setting which sets min and\n// max for the top, left, bottom and right edges of the target being resized.\n//\n// interact(target).resize({\n//   edges: { top: true, left: true },\n//   restrictEdges: {\n//     inner: { top: 200, left: 200, right: 400, bottom: 400 },\n//     outer: { top:   0, left:   0, right: 600, bottom: 600 },\n//   },\n// })\n\nimport type { Point, Rect } from '@interactjs/core/types'\nimport extend from '@interactjs/utils/extend'\nimport * as rectUtils from '@interactjs/utils/rect'\n\nimport { makeModifier } from '../base'\nimport type { ModifierArg, ModifierState } from '../types'\n\nimport type { RestrictOptions } from './pointer'\nimport { getRestrictionRect } from './pointer'\n\nexport interface RestrictEdgesOptions {\n  inner: RestrictOptions['restriction']\n  outer: RestrictOptions['restriction']\n  offset?: RestrictOptions['offset']\n  endOnly: boolean\n  enabled?: boolean\n}\n\nexport type RestrictEdgesState = ModifierState<\n  RestrictEdgesOptions,\n  {\n    inner: Rect\n    outer: Rect\n    offset: RestrictEdgesOptions['offset']\n  }\n>\n\nconst noInner = { top: +Infinity, left: +Infinity, bottom: -Infinity, right: -Infinity }\nconst noOuter = { top: -Infinity, left: -Infinity, bottom: +Infinity, right: +Infinity }\n\nfunction start({ interaction, startOffset, state }: ModifierArg<RestrictEdgesState>) {\n  const { options } = state\n  let offset: Point\n\n  if (options) {\n    const offsetRect = getRestrictionRect(options.offset, interaction, interaction.coords.start.page)\n\n    offset = rectUtils.rectToXY(offsetRect)\n  }\n\n  offset = offset || { x: 0, y: 0 }\n\n  state.offset = {\n    top: offset.y + startOffset.top,\n    left: offset.x + startOffset.left,\n    bottom: offset.y - startOffset.bottom,\n    right: offset.x - startOffset.right,\n  }\n}\n\nfunction set({ coords, edges, interaction, state }: ModifierArg<RestrictEdgesState>) {\n  const { offset, options } = state\n\n  if (!edges) {\n    return\n  }\n\n  const page = extend({}, coords)\n  const inner = getRestrictionRect(options.inner, interaction, page) || ({} as Rect)\n  const outer = getRestrictionRect(options.outer, interaction, page) || ({} as Rect)\n\n  fixRect(inner, noInner)\n  fixRect(outer, noOuter)\n\n  if (edges.top) {\n    coords.y = Math.min(Math.max(outer.top + offset.top, page.y), inner.top + offset.top)\n  } else if (edges.bottom) {\n    coords.y = Math.max(Math.min(outer.bottom + offset.bottom, page.y), inner.bottom + offset.bottom)\n  }\n  if (edges.left) {\n    coords.x = Math.min(Math.max(outer.left + offset.left, page.x), inner.left + offset.left)\n  } else if (edges.right) {\n    coords.x = Math.max(Math.min(outer.right + offset.right, page.x), inner.right + offset.right)\n  }\n}\n\nfunction fixRect(rect: Rect, defaults: Rect) {\n  for (const edge of ['top', 'left', 'bottom', 'right']) {\n    if (!(edge in rect)) {\n      rect[edge] = defaults[edge]\n    }\n  }\n\n  return rect\n}\n\nconst defaults: RestrictEdgesOptions = {\n  inner: null,\n  outer: null,\n  offset: null,\n  endOnly: false,\n  enabled: false,\n}\n\nconst restrictEdges = {\n  noInner,\n  noOuter,\n  start,\n  set,\n  defaults,\n}\n\nexport default makeModifier(restrictEdges, 'restrictEdges')\nexport { restrictEdges }\n"],"names":["noInner","top","Infinity","left","bottom","right","noOuter","start","_ref","interaction","startOffset","state","options","offset","offsetRect","getRestrictionRect","coords","page","rectUtils","rectToXY","x","y","set","_ref2","edges","extend","inner","outer","fixRect","Math","min","max","rect","defaults","edge","endOnly","enabled","restrictEdges","restrictEdges$1","makeModifier"],"mappings":";;+RAsCA,MAAMA,QAAU,CAAEC,IAAMC,IAAUC,KAAOD,IAAUE,QAASF,IAAUG,OAAQH,KACxEI,QAAU,CAAEL,KAAMC,IAAUC,MAAOD,IAAUE,OAASF,IAAUG,MAAQH,KAE9E,SAASK,MAAKC,GAAuE,IAAtEC,YAAEA,EAAWC,YAAEA,EAAWC,MAAEA,GAAwCH,EACjF,MAAMI,QAAEA,GAAYD,EACpB,IAAIE,EAEJ,GAAID,EAAS,CACX,MAAME,EAAaC,mBAAmBH,EAAQC,OAAQJ,EAAaA,EAAYO,OAAOT,MAAMU,MAE5FJ,EAASK,UAAUC,SAASL,EAC9B,CAEAD,EAASA,GAAU,CAAEO,EAAG,EAAGC,EAAG,GAE9BV,EAAME,OAAS,CACbZ,IAAKY,EAAOQ,EAAIX,EAAYT,IAC5BE,KAAMU,EAAOO,EAAIV,EAAYP,KAC7BC,OAAQS,EAAOQ,EAAIX,EAAYN,OAC/BC,MAAOQ,EAAOO,EAAIV,EAAYL,MAElC,CAEA,SAASiB,IAAGC,GAAyE,IAAxEP,OAAEA,EAAMQ,MAAEA,EAAKf,YAAEA,EAAWE,MAAEA,GAAwCY,EACjF,MAAMV,OAAEA,EAAMD,QAAEA,GAAYD,EAE5B,IAAKa,EACH,OAGF,MAAMP,EAAOQ,OAAO,CAAE,EAAET,GAClBU,EAAQX,mBAAmBH,EAAQc,MAAOjB,EAAaQ,IAAU,GACjEU,EAAQZ,mBAAmBH,EAAQe,MAAOlB,EAAaQ,IAAU,GAEvEW,QAAQF,EAAO1B,SACf4B,QAAQD,EAAOrB,SAEXkB,EAAMvB,IACRe,EAAOK,EAAIQ,KAAKC,IAAID,KAAKE,IAAIJ,EAAM1B,IAAMY,EAAOZ,IAAKgB,EAAKI,GAAIK,EAAMzB,IAAMY,EAAOZ,KACxEuB,EAAMpB,SACfY,EAAOK,EAAIQ,KAAKE,IAAIF,KAAKC,IAAIH,EAAMvB,OAASS,EAAOT,OAAQa,EAAKI,GAAIK,EAAMtB,OAASS,EAAOT,SAExFoB,EAAMrB,KACRa,EAAOI,EAAIS,KAAKC,IAAID,KAAKE,IAAIJ,EAAMxB,KAAOU,EAAOV,KAAMc,EAAKG,GAAIM,EAAMvB,KAAOU,EAAOV,MAC3EqB,EAAMnB,QACfW,EAAOI,EAAIS,KAAKE,IAAIF,KAAKC,IAAIH,EAAMtB,MAAQQ,EAAOR,MAAOY,EAAKG,GAAIM,EAAMrB,MAAQQ,EAAOR,OAE3F,CAEA,SAASuB,QAAQI,EAAYC,GAC3B,IAAK,MAAMC,IAAQ,CAAC,MAAO,OAAQ,SAAU,SACrCA,KAAQF,IACZA,EAAKE,GAAQD,EAASC,IAI1B,OAAOF,CACT,CAEA,MAAMC,SAAiC,CACrCP,MAAO,KACPC,MAAO,KACPd,OAAQ,KACRsB,SAAS,EACTC,SAAS,GAGLC,cAAgB,CACpBrC,gBACAM,gBACAC,YACAe,QACAW,mBAGF,IAAAK,gBAAeC,aAAaF,cAAe"}