{"version":3,"file":"raf.js","sources":["raf.ts"],"sourcesContent":["let lastTime = 0\nlet request: typeof requestAnimationFrame\nlet cancel: typeof cancelAnimationFrame\n\nfunction init(global: Window | typeof globalThis) {\n  request = global.requestAnimationFrame\n  cancel = global.cancelAnimationFrame\n\n  if (!request) {\n    const vendors = ['ms', 'moz', 'webkit', 'o']\n\n    for (const vendor of vendors) {\n      request = global[`${vendor}RequestAnimationFrame` as 'requestAnimationFrame']\n      cancel =\n        global[`${vendor}CancelAnimationFrame` as 'cancelAnimationFrame'] ||\n        global[`${vendor}CancelRequestAnimationFrame` as 'cancelAnimationFrame']\n    }\n  }\n\n  request = request && request.bind(global)\n  cancel = cancel && cancel.bind(global)\n\n  if (!request) {\n    request = (callback) => {\n      const currTime = Date.now()\n      const timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      const token = global.setTimeout(() => {\n        // eslint-disable-next-line n/no-callback-literal\n        callback(currTime + timeToCall)\n      }, timeToCall)\n\n      lastTime = currTime + timeToCall\n      return token as any\n    }\n\n    cancel = (token) => clearTimeout(token)\n  }\n}\n\nexport default {\n  request: (callback: FrameRequestCallback) => request(callback),\n  cancel: (token: number) => cancel(token),\n  init,\n}\n"],"names":["lastTime","request","cancel","init","global","requestAnimationFrame","cancelAnimationFrame","vendors","vendor","bind","callback","currTime","Date","now","timeToCall","Math","max","token","setTimeout","clearTimeout"],"mappings":";;;;;;;;AAAA,IAAIA,QAAQ,GAAG,CAAC,CAAA;AAChB,IAAIC,OAAqC,CAAA;AACzC,IAAIC,MAAmC,CAAA;AAEvC,SAASC,IAAIA,CAACC,MAAkC,EAAE;EAChDH,OAAO,GAAGG,MAAM,CAACC,qBAAqB,CAAA;EACtCH,MAAM,GAAGE,MAAM,CAACE,oBAAoB,CAAA;EAEpC,IAAI,CAACL,OAAO,EAAE;IACZ,MAAMM,OAAO,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAA;AAE5C,IAAA,KAAK,MAAMC,MAAM,IAAID,OAAO,EAAE;AAC5BN,MAAAA,OAAO,GAAGG,MAAM,CAAE,CAAEI,EAAAA,MAAO,uBAAsB,CAA4B,CAAA;AAC7EN,MAAAA,MAAM,GACJE,MAAM,CAAE,CAAA,EAAEI,MAAO,CAAA,oBAAA,CAAqB,CAA2B,IACjEJ,MAAM,CAAE,CAAEI,EAAAA,MAAO,6BAA4B,CAA2B,CAAA;AAC5E,KAAA;AACF,GAAA;EAEAP,OAAO,GAAGA,OAAO,IAAIA,OAAO,CAACQ,IAAI,CAACL,MAAM,CAAC,CAAA;EACzCF,MAAM,GAAGA,MAAM,IAAIA,MAAM,CAACO,IAAI,CAACL,MAAM,CAAC,CAAA;EAEtC,IAAI,CAACH,OAAO,EAAE;IACZA,OAAO,GAAIS,QAAQ,IAAK;AACtB,MAAA,MAAMC,QAAQ,GAAGC,IAAI,CAACC,GAAG,EAAE,CAAA;AAC3B,MAAA,MAAMC,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,EAAE,IAAIL,QAAQ,GAAGX,QAAQ,CAAC,CAAC,CAAA;AAC1D,MAAA,MAAMiB,KAAK,GAAGb,MAAM,CAACc,UAAU,CAAC,MAAM;AACpC;AACAR,QAAAA,QAAQ,CAACC,QAAQ,GAAGG,UAAU,CAAC,CAAA;OAChC,EAAEA,UAAU,CAAC,CAAA;MAEdd,QAAQ,GAAGW,QAAQ,GAAGG,UAAU,CAAA;AAChC,MAAA,OAAOG,KAAK,CAAA;KACb,CAAA;AAEDf,IAAAA,MAAM,GAAIe,KAAK,IAAKE,YAAY,CAACF,KAAK,CAAC,CAAA;AACzC,GAAA;AACF,CAAA;AAEA,UAAe;AACbhB,EAAAA,OAAO,EAAGS,QAA8B,IAAKT,OAAO,CAACS,QAAQ,CAAC;AAC9DR,EAAAA,MAAM,EAAGe,KAAa,IAAKf,MAAM,CAACe,KAAK,CAAC;AACxCd,EAAAA,IAAAA;AACF,CAAC;;;;"}