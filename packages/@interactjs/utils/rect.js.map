{"version":3,"file":"rect.js","sources":["rect.ts"],"sourcesContent":["import type {\n  HasGetRect,\n  RectResolvable,\n  Rect,\n  Element,\n  Point,\n  FullRect,\n  EdgeOptions,\n} from '@interactjs/core/types'\n\nimport { closest, getElementRect, parentNode } from './domUtils'\nimport extend from './extend'\nimport is from './is'\n\nexport function getStringOptionResult(value: any, target: HasGetRect, element: Node) {\n  if (value === 'parent') {\n    return parentNode(element)\n  }\n\n  if (value === 'self') {\n    return target.getRect(element as Element)\n  }\n\n  return closest(element, value)\n}\n\nexport function resolveRectLike<T extends any[]>(\n  value: RectResolvable<T>,\n  target?: HasGetRect,\n  element?: Node,\n  functionArgs?: T,\n) {\n  let returnValue: any = value\n  if (is.string(returnValue)) {\n    returnValue = getStringOptionResult(returnValue, target, element)\n  } else if (is.func(returnValue)) {\n    returnValue = returnValue(...functionArgs)\n  }\n\n  if (is.element(returnValue)) {\n    returnValue = getElementRect(returnValue)\n  }\n\n  return returnValue as Rect\n}\n\nexport function toFullRect(rect: Rect): FullRect {\n  const { top, left, bottom, right } = rect\n  const width = rect.width ?? rect.right - rect.left\n  const height = rect.height ?? rect.bottom - rect.top\n\n  return { top, left, bottom, right, width, height }\n}\n\nexport function rectToXY(rect: Rect | Point) {\n  return (\n    rect && {\n      x: 'x' in rect ? rect.x : rect.left,\n      y: 'y' in rect ? rect.y : rect.top,\n    }\n  )\n}\n\nexport function xywhToTlbr<T extends Partial<Rect & Point>>(rect: T) {\n  if (rect && !('left' in rect && 'top' in rect)) {\n    rect = extend({}, rect)\n\n    rect.left = rect.x || 0\n    rect.top = rect.y || 0\n    rect.right = rect.right || rect.left + rect.width\n    rect.bottom = rect.bottom || rect.top + rect.height\n  }\n\n  return rect as Rect & T\n}\n\nexport function tlbrToXywh(rect: Rect & Partial<Point>) {\n  if (rect && !('x' in rect && 'y' in rect)) {\n    rect = extend({}, rect)\n\n    rect.x = rect.left || 0\n    rect.y = rect.top || 0\n    rect.width = rect.width || (rect.right || 0) - rect.x\n    rect.height = rect.height || (rect.bottom || 0) - rect.y\n  }\n\n  return rect as FullRect & Point\n}\n\nexport function addEdges(edges: EdgeOptions, rect: Rect, delta: Point) {\n  if (edges.left) {\n    rect.left += delta.x\n  }\n  if (edges.right) {\n    rect.right += delta.x\n  }\n  if (edges.top) {\n    rect.top += delta.y\n  }\n  if (edges.bottom) {\n    rect.bottom += delta.y\n  }\n\n  rect.width = rect.right - rect.left\n  rect.height = rect.bottom - rect.top\n}\n"],"names":["getStringOptionResult","value","target","element","parentNode","getRect","closest","resolveRectLike","functionArgs","returnValue","is","string","func","getElementRect","toFullRect","rect","_rect$width","_rect$height","top","left","bottom","right","width","height","rectToXY","x","y","xywhToTlbr","extend","tlbrToXywh","addEdges","edges","delta"],"mappings":"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"}